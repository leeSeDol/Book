/* COMBO: filename = common/global.min.js, type = application/javascript, resp = 200 */
function detectOS(){var d,e,f,g,h,i,j,a=navigator.userAgent,b="Win32"==navigator.platform||"Windows"==navigator.platform,c="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(c)return"MAC";if(d="X11"==navigator.platform&&!b&&!c)return"Unix";if(e=String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(b){if(f=a.indexOf("Windows NT 5.0")>-1||a.indexOf("Windows 2000")>-1)return"Win2000";if(g=a.indexOf("Windows NT 5.1")>-1||a.indexOf("Windows XP")>-1)return"WinXP";if(h=a.indexOf("Windows NT 5.2")>-1||a.indexOf("Windows 2003")>-1)return"Win2003";if(i=a.indexOf("Windows NT 6.0")>-1||a.indexOf("Windows Vista")>-1)return"WinVista";if(j=a.indexOf("Windows NT 6.1")>-1||a.indexOf("Windows 7")>-1)return"Win7"}return"other"}function AC_FL_RunContent(){var c,a="",b=AC_GetArgs(arguments,"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");if(BROWSER.ie&&!BROWSER.opera){a+="<object ";for(c in b.objAttrs)a+=c+'="'+b.objAttrs[c]+'" ';a+=">";for(c in b.params)a+='<param name="'+c+'" value="'+b.params[c]+'" /> ';a+="</object>"}else{a+="<embed ";for(c in b.embedAttrs)a+=c+'="'+b.embedAttrs[c]+'" ';a+="></embed>"}return a}function AC_GetArgs(a,b,c){var e,f,d=new Object;for(d.embedAttrs=new Object,d.params=new Object,d.objAttrs=new Object,e=0;e<a.length;e+=2)switch(f=a[e].toLowerCase()){case"classid":break;case"pluginspage":d.embedAttrs[a[e]]="http://www.macromedia.com/go/getflashplayer";break;case"src":d.embedAttrs[a[e]]=a[e+1],d.params["movie"]=a[e+1];break;case"codebase":d.objAttrs[a[e]]="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0";break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblclick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"id":d.objAttrs[a[e]]=a[e+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":d.embedAttrs[a[e]]=d.objAttrs[a[e]]=a[e+1];break;case"class":d.embedAttrs[a[e]]=d.objAttrs[a[e]]=a[e+1];break;default:d.embedAttrs[a[e]]=d.params[a[e]]=a[e+1]}return d.objAttrs["classid"]=b,c&&(d.embedAttrs["type"]=c),d}function showSelectAvatar(a,b,c,d){var g,e=Date.now(),f=parseInt(a.data("avtcount"))?parseInt(a.data("avtcount")):12;defavatar=$.cookie("loginavatar"),d=defavatar?SITEURL+"misc.php?mod=defaultavatar":d,c=c?c:1==parseInt(a.data("gender")),g=function(){misc.loadjs("http://open.web.meitu.com/sources/xiuxiu.js",function(){$("html").data("init")();var a={mod:"upload",inc:"avatar","do":"avatar_3size",ajaxsub:"true",formhash:formHash,randoms:Math.random()};xiuxiu.setLaunchVars("quality",100),xiuxiu.setLaunchVars("maxFinalWidth",200),xiuxiu.setLaunchVars("maxFinalHeight",200),xiuxiu.embedSWF("xiuxiuavatar_"+e,5,"100%","425"),xiuxiu.setUploadURL(SITEURL+"ajax.php"),xiuxiu.setUploadArgs(a),xiuxiu.setUploadType(2),xiuxiu.setUploadDataFieldName("avatar"),xiuxiu.onInit=function(){!!d&&xiuxiu.loadPhoto(d)},xiuxiu.onUploadResponse=function(a){if(a=$.parseJSON(a),1==parseInt(a.code)){a.base64=misc.urldecode(a.base64);for(var c=0,d=b.length;d>c;c++)b[c].fn?b[c].fn(misc.urldecode(a[b[c].type])):b[c].elem.attr("src",misc.urldecode(a[b[c].type]));closeDialog("select_avatar"),showDialog("success","",'更新成功！<br/><span class="font12">如头像没有变化，按 <kbd>ctrl + F5</kbd> 强制刷新或清除浏览器缓存即可。</span>',{width:500,closetime:4e3})}else showDialog("danger","","上传过程中出现错误，错误码："+a.code+"，您可以尝试重新上传。",{key:"avatar_upload_error",closetime:3e3})}})},misc.loadjs(RESJSPATH+"plugin/icheck/icheck.js",function(){misc.loadcss("plugin/icheck.square-mini.css",function(){var i,j,k,l,n,o,p,q,r,s,t,u,v,b=$('<div id="default_avatar" class="cl"><h3 class="bg-info font16">选枚喜欢的头像吧～</h3></div>'),d=b.find("h3:first"),h="";for(i=1;f>=i;i++)h+='<div class="avatars'+(i%6?" mr10":"")+'"><span></span><div class="ovh"><i></i><input class="avtradio" name="avatar" type="radio"'+(1==i?'checked="checked"':"")+' value="'+i+'"/><img class="img-rounded" alt="avatar" src="'+RESPATH+"images/avatars/"+(c?"boy":"girl")+"/"+i+'_middle.png" data-path="res/images/avatars/'+(c?"boy":"girl")+"/"+i+'_middle.png"/></div></div>';b.append(h),j=b.find(".avatars"),k=j.find(":radio"),k.iCheck({radioClass:"iradio_squaremini-blue hover"}),l=j.find(".iradio_squaremini-blue"),j.hover(function(){a=$(this),l.addClass("hover")},function(){l.addClass("hover")}).click(function(){var b,c,d;j.removeClass("current"),k.iCheck("uncheck"),a.find(":radio").iCheck("check"),b=j.index(a),c=f/2,d=c>b?b:f-1-b+c,u.data("index",d)}),n=$('<button class="btn btn-default">返回上传</button>'),o=$('<button class="btn btn-success">选择这张图片作为头像</button>'),p=null,q=null,r=!0,s=function(){var a=p.parents(".w3cfunsui-dialog:first").find(".nav-tabs li"),b=p.find(".tabs-cont");a.removeClass("active").eq(0).addClass("active"),b.removeClass("active").eq(0).addClass("active")},t=function(){var a,b,c,d,e;clearInterval(q),a=u.data("index"),b=f/2,c=b,d=misc.random(1,2)*misc.random(700,865),e=function(){var e,d=$(".dialog_select_avatar").length;!d&&clearInterval(q),c=b>a?a:f-1-a+b,j.removeClass("current").eq(c).addClass("current"),k.iCheck("uncheck").eq(c).iCheck("check"),a++,a>=f&&(a=0),window.Audio&&d&&(e=new Audio,e.src=RESPATH+"sound/avatar/dida.wav",e.play())},r&&(r=!1,u.prop("disabled",!0),o.prop("disabled",!0),setTimeout(e,100),setTimeout(e,300),setTimeout(e,450),setTimeout(e,550),setTimeout(function(){q=setInterval(e,20)},600),setTimeout(function(){clearInterval(q),clearInterval(q),clearInterval(q)},d),setTimeout(e,d+25),setTimeout(e,d+75),setTimeout(e,d+210),setTimeout(e,d+440),setTimeout(e,d+700),setTimeout(e,d+1e3),setTimeout(e,d+1400),setTimeout(e,d+1900),setTimeout(function(){e(),u.data("index",a),r=!0,u.prop("disabled",!1),o.prop("disabled",!1)},d+2800))},u=$('<button class="btn btn-info pull-right">点我，点我，快点我！</button>'),u.data("index",0).click(t),d.append(u),n.click(s),o.click(function(){var a,b;r&&(s(),a=l.index(j.find(".iradio_squaremini-blue.checked")),b=j.eq(a).find("img:first").data("path").replace("_middle","_big"),b=b.replace(/\/\//),b=SITEURL+b,setTimeout(function(){xiuxiu.loadPhoto(b)},1e3))}),v=[[{tabname:"上传头像"},{tabname:"选择头像"}],[{tabcont:'<div id="xiuxiuavatar_'+e+'"></div>',isbtn:!1,css:{height:"440px"}},{tabcont:b,isbtn:!0}],[[],[n,o]]],p=showDialogTabs("select_avatar",v,702,"auto",!1,!0),g()})})}function load_usedattach(a,b,c){var d=[];a&&32==a.length&&($("html").data("init")(),d={mod:"common",inc:"attach","do":"get_used",ajaxsub:!0,formhash:formHash,randoms:Math.random()},d["idmd5_"+formHash]=a,d["type_"+formHash]=misc.urlencode(b),d["memberid_"+formHash]=MEMBER_ID,$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(d),success:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o;if(a&&1==a.state&&(b=null,d=null,e=null,f=null,g=null,a=a.data,a.length>0)){for(v in a)v=a[v],1==v.isimage?(f=!0,imghtml=$('<div class="used picplate uploaded">                                               <div class="thumb">                                                 <div class="pic-box">                                                       <img class="attachimg" src="misc.php?mod=attach&genre=editor&aid='+v.md5+'"/>                                                   </div>                                                  <input name="rb_cover" class="rb_cover" type="radio"/>                                              </div>                                              <span>                                                  <input class="form-control input-sm" type="text" placeholder="图片描述" value="'+misc.urldecode(v.description)+'">                                                  <a class="deletePic icon-awesome-trash-o" href="javascript:;"></a>                                              </span>                                         </div>'),misc.placeholder(imghtml.find("input.form-control")),v.iscover?(imghtml.find(".thumb").data("attach_aid",v.md5).addClass("select_cover"),imghtml.find(".rb_cover").prop("checked",!0)):imghtml.find(".thumb").data("attach_aid",v.md5),c.options.attach_picdata.append(imghtml)):(g=!0,h=$('<dd class="used uploaded cl"></dd>'),i=$('<span class="file_name file_icon"></span>'),j=v.filename.match(/\w*$/)[0],k=$('<i class="icon_'+j+'"></i>'),i.append(k),i.append("<em>"+v.filename+"</em>"),l=$('<span class="file_description"><input class="file_desc form-control input-sm" type="text" placeholder="文件描述" value="'+misc.urldecode(v.description)+'"/></span>'),m=$('<span class="file_operate"></span>'),n=$('<a class="filedel" href="javascript:;">删除</a>'),o=$('<a class="fileinsert" href="javascript:;">插入</a>'),h.data("attach_aid",v.md5),n.data("attach_aid",v.md5),o.data("attach_aid",v.md5),m.append(n),m.append(o),h.append(i),h.append(l),h.append(m),misc.placeholder(l.find("input.form-control")),c.options.attach_filedata.append(h));(f||g)&&(b=setInterval(function(){f&&(d=$(".insertPicture:first").parents(".w3cfuns_icon:first"),f&&d.addClass("attach")),g&&(e=$(".insertFile:first").parents(".w3cfuns_icon:first"),g&&e.addClass("attach")),setTimeout(function(){(f||g)&&clearInterval(b)},200)},20))}}}))}function set_usedattach(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;if(a&&(c=null,d=null,e=!1,f=!1,a.length>0)){for(v in a)v=a[v],1==v.isimage?(e=!0,imghtml=$('<div class="used picplate uploaded">                                  <div class="thumb">                                     <div class="pic-box">                                           <img class="attachimg" src="misc.php?mod=attach&genre=editor&aid='+v.md5+'"/>                                       </div>                                      <input name="rb_cover" class="rb_cover" type="radio"/>                                  </div>                                  <span>                                      <input class="form-control input-sm" type="text" placeholder="图片描述" value="'+misc.urldecode(v.description)+'">                                      <a class="deletePic icon-awesome-trash-o" href="javascript:;"></a>                                  </span>                             </div>'),misc.placeholder(imghtml.find("input.form-control")),imghtml.find(".thumb").data("attach_aid",v.md5),b.options.attach_picdata.append(imghtml)):(f=!0,g=$('<dd class="used uploaded cl"></dd>'),h=$('<span class="file_name file_icon"></span>'),i=v.filename.match(/\w*$/)[0],j=$('<i class="icon_'+i+'"></i>'),h.append(j),h.append("<em>"+v.filename+"</em>"),k=$('<span class="file_description"><input class="file_desc form-control input-sm" type="text" placeholder="文件描述" value="'+misc.urldecode(v.description)+'"/></span>'),l=$('<span class="file_operate"></span>'),m=$('<a class="filedel" href="javascript:;">删除</a>'),n=$('<a class="fileinsert" href="javascript:;">插入</a>'),g.data("attach_aid",v.md5),m.data("attach_aid",v.md5),n.data("attach_aid",v.md5),l.append(m),l.append(n),g.append(h),g.append(k),g.append(l),misc.placeholder(k.find("input.form-control")),b.options.attach_filedata.append(g));(e||f)&&(e&&(c=$(".insertPicture:first").parents(".w3cfuns_icon:first"),!!c.length&&c.addClass("attach")),f&&(d=$(".insertFile:first").parents(".w3cfuns_icon:first"),!!d.length&&d.addClass("attach"))),window.attach_picdata_flag=e,window.attach_filedata_flag=f}}function get_attachByDialog(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;if($("html").data("init")(),e=formHash,f=null,g=null,h=null,i=null,j=m=0,"file"==c||"all"==c)for(f=$(".w3cfunsui-dialog .w3cfunsui-dialog-content:first .fileList dd"),f.length<=0&&(f=a.options.attach_filedata.find("dd")),f.length>0&&(h=f.find(".file_desc")),j=m=f.length,k=0,l=null;j>k;k++)d?b.push([f.eq(k).data("attach_aid"),misc.urlencode(h.eq(k).val())]):(l=f.eq(k),b["attach_"+e+"["+k+"][]"]=misc.urlencode(l.data("attach_aid"))+","+misc.urlencode(h.eq(k).val())+","+misc.urlencode(l.hasClass("unused")?"unused":"used"));if("pic"==c||"all"==c)for(g=$(".w3cfunsui-dialog .w3cfunsui-dialog-content:first .pic_upload_contpanel .picplate"),g.length<=0&&(g=a.options.attach_picdata.find(".picplate")),g.length>0&&(i=g.find("span .form-control"),g=g.find(".thumb")),k=0,m=g.length,n=j,l=null;m>k;k++,n++)d?b.push([g.eq(k).data("attach_aid"),misc.urlencode(i.eq(k).val()),g.eq(k).find(".rb_cover:first").prop("checked")?1:0]):(l=g.eq(k),b["attach_"+e+"["+n+"][]"]=misc.urlencode(l.data("attach_aid"))+","+misc.urlencode(i.eq(k).val())+","+misc.urlencode(l.parent(".picplate:first").hasClass("unused")?"unused":"used"));return b}function check_linksafe(){var a=[["","attachment"],["http://",".w3cfuns.com"],["http://",".kwooshung.com"]],b=$("a[data-toggle=checklink]"),c=function(){b.blur().popover("destroy")};$(window.document).click(c),$(window).scroll(c),b.click(function(b){var c,d,e,f,g;if(b&&b.stopPropagation(),c=$(this),d=null,e=c.attr("href"),!c.data("safechecked"))if(c.data("safechecked",!0),c.data("safelink",!1),/.*\:\/\//.test(e)){for(f=0,g=a.length;g>f;f++)if(d=new RegExp("^"+(a[f][0]+".*"+a[f][1])+"/"),d.test(e)){c.data("safelink",!0);break}}else c.data("safelink",!0);c.data("safelink")||(b&&b.preventDefault(),c.popover({container:"body",placement:"top",html:!0,title:"安全提醒：网页正在尝试跳转",content:'<p class="alert alert-warning mb1" role="alert">无法确保此链接的安全性，您确定 <a href="'+e+'" class="link_orange" target="_blank">继续访问</a> 吗？</p>'}).popover("show"))})}function imgLoadCheck(){var a=$("img[data-loadcheck]"),b=$("html");try{a.each(function(){var a=$(this);a.data("path",a.attr("src"))}),a.one("error",function(){var a,c,d,e;b.data("init")(),a=$(this),c=a.attr("src").replace(/http.*\//,"").match(/(jpg|png|gif|\.).*\./),!!c&&(c=c[0].replace(/(jpg|png|gif|\.)/g,"")),d=a.data("path").replace(/http:\/\/.*?\//,"").match(/.*\.(jpg|png|gif)/,""),e={mod:"common",inc:"attach","do":"checkimage",ajaxsub:!0,formhash:formHash,randoms:Math.random()},d&&d.length>=2&&!a.data("id")?e["path_"+formHash]=misc.urlencode(d[0]):(e["type_"+formHash]=misc.urlencode(a.data("loadcheck")),e["id_"+formHash]=misc.urlencode(a.data("id")),e["imgtype_"+formHash]=c),e["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(e),success:function(b){1==b.state?(a.attr("src",b.path),a.removeAttr("data-loadcheck"),a.removeAttr("data-id"),a.one("error",function(){a.attr("src",attachurl+"extend/"+b.path.replace(/http(|s)\:\/\/.*?\//,"")),a.one("error",function(){a.parents("a:first").remove();var b=a.parents("[class*=media-pic]:first");b.attr("class",b.attr("class").replace(/media-pic\d+\x\d+\-(left|right)/,"").replace(/\s+/," ")),a.remove()})})):(a.parents("a:first").remove(),a.remove())}})})}catch(c){}}function win_state(a,b,c){var f,d=$("body"),e=$("#win_state");e.remove(),f=$('<div id="win_state"></div>'),!!b&&f.append("<span"+(c?' style="'+c+'"':"")+">"+b+"</span>"),BROWSER.ie&&BROWSER.ie<=8?f.fadeIn(600).delay(1300).fadeOut(600):f.show(0),f.addClass(a),d.append(f),setTimeout(function(){f.remove()},2500)}function login_tip(a){a||(a=""),showDialog("info","","您还没有登录哦，建议登录后再继续！",{key:"logintip_success",icontip:!0,button1style:"btn-default",button2style:"btn-primary",texticonattr:{style:"top:20px; left:20px;"},textattr:{style:"top:20px; left:100px;","class":"font24 lh30"},modal:!0},"暂不登录",function(){closeDialog("logintip_success")},"登录仅需3秒",function(){location.href="/member.php?referer="+encodeURIComponent(location.href+a)})}function report(){var a=$("html"),b=$("[data-report=true]");b.data("ajaxFlag",!0).click(function(){var c,d,e,f,g,h,i,j,k,l;return a.init(),c=$(this),d=c.data("report-point"),e=null,f=c.data("report-link"),g=["[选填] 填写合适的理由，有助于站务管理人员更迅速的检查问题。","[必填] 请填写您举报的理由，这将有助于站务管理人员更迅速处理。"],h="",0>=MEMBER_ID?(login_tip(d),!1):(f?(h=$('<form>                  <div class="mb0 form-group"><label>举报类型：</label></div>                  <div id="report_area" class="mt0 radio cl">                     <label class="radio-inline">                            <input type="radio" name="report_type" value="1"><span class="ml5">广告软文</span>                      </label>                        <label class="radio-inline">                            <input type="radio" name="report_type" value="2"><span class="ml5">恶意灌水</span>                      </label>                        <label class="radio-inline">                            <input type="radio" name="report_type" value="3"><span class="ml5">违规内容</span>                      </label>                        <label class="radio-inline">                            <input type="radio" name="report_type" value="4"><span class="ml5">文不对题</span>                      </label>                        <label class="radio-inline">                            <input type="radio" name="report_type" value="0"><span class="ml5">其他理由</span>                      </label>                    </div>                  <div class="mt30 form-group">                       <label for="report_reason">举报理由：</label>                        <textarea id="report_reason" class="form-control" rows="3" placeholder="'+g[0]+'" style="height:76px;"></textarea>                  </div>              </form>'),i=null,j=null,k=!1,l=null,e=showDialogPanel("report","我要举报",h,500,300,!1,"取消举报",function(){closeDialog("report")},!0,"立即举报",function(){var c=null,e=location.href.replace(SITEURL,""),g=i.val();return null===l?(showDialog("info","","请选择举报类型",{closetime:1500}),!1):0===l&&g.length<=0?(showDialog("danger","","请填写您举报的理由。",{closetime:1500}),!1):(b.data("ajaxFlag")&&(c={mod:"common",inc:"report","do":"add",ajaxsub:!0,formhash:formHash,randoms:Math.random()},c["url_"+formHash]=misc.urlencode(e),c["link_"+formHash]=misc.urlencode(f),c["type_"+formHash]=misc.urlencode(l),c["message_"+formHash]=misc.urlencode(g),c["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(c),beforeSend:function(){b.data("ajaxFlag",!1)},success:function(a){1==a.state?(showDialog("success","","举报成功，我们将尽快处理！<br/>感谢您对 "+WEBNAME+" 尽的每一份力！",{width:500,closetime:2500}),closeDialog("report")):0==a.state?login_tip(d):-1==a.state?(showDialog("danger","","您的请求来路不明确，举报失败，请重试",{closetime:1500}),closeDialog("report")):-2==a.state?(showDialog("info","","你已经举报过了哦，系统正在处理。",{closetime:1500}),!g.length&&closeDialog("report")):-3==a.state&&showDialog("danger","","举报失败，请重试",{closetime:1500})},complete:function(){b.data("ajaxFlag",!0)}})),void 0)},!1,function(){misc.loadjs(RESJSPATH+"plugin/icheck/icheck.js",function(){misc.loadcss("plugin/icheck.flat.css",function(){h.find("div.radio:first input").iCheck({radioClass:"iradio_flat-red"})})}),i=h.find("#report_reason"),misc.placeholder(i),j=h.find("input[name=report_type]"),j.on("ifChecked",function(){l=parseInt(h.find("input[name=report_type]:checked").val()),l=l?l:0,k=0===l,k?i.attr("placeholder",g[1]):i.attr("placeholder",g[0])})},{button1style:"btn-default",button2style:"btn-primary"})):showDialog("danger","","错误：请刷新页面后再试。",{closetime:1500}),!1)})}function favorite(){var c=$("html"),d=$("[data-fav=true]");d.data("ajaxFlag",!0).click(function(){var a=$(this),b=d.data("type"),e=d.data("id"),f=d.data("textselector"),g=d.data("point"),h="",i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null;if(a.hasClass("active"));else{if(c.init(),0>=MEMBER_ID)return login_tip(g),!1;h=$('<div class="mb10 input-group">                       <label for="fav_title" class="input-group-addon">标题：</label>                        <input id="fav_title" type="text" class="form-control" value="'+d.data("title")+'">                 </div>                  <div class="mb10 form-group cl">                        <select id="fav_category_list" class="mr5 form-control pull-left hide"></select>                        <input id="fav_category_input" style="width:450px;" class="mr5 form-control pull-left hide" placeholder="ESC键取消，回车保存"/>                     <button id="btn_save_category" type="button" class="btn btn-primary pull-right hide">保存</button>                        <button id="btn_add_category" type="button" class="mr5 btn btn-primary pull-left">创建分类</button>                     <a id="btn_manage_category" class="btn link_blue_underline pull-left hide" href="manage.php?mod=favorite&inc=category" target="_blank">管理分类</a>                 </div>                  <div class="mb0 form-group">                        <textarea id="fav_desc" class="form-control" rows="3" placeholder="一个简单理由，方便日后查看。"></textarea>                  </div>'),i=h.find("#fav_title").data("ajaxFlag",!0),j=h.find("#fav_desc"),k=h.find("#fav_category_list"),l=h.find("#fav_category_input"),m=h.find("#btn_save_category"),n=h.find("#btn_add_category"),o=h.find("#btn_manage_category"),o.click(function(){d.data("fav",!0),closeDialog("favorite")}),misc.placeholder(j),misc.placeholder(l),p=showDialogPanel("favorite","添加收藏",h,550,280,!0,"取消",function(){closeDialog("favorite",!0)},!0,"立即收藏",function(){var h=null,m=k.find("option"),n=k.find("option:selected");if(m.length>0){if(!misc.empty(n)&&localStorage.setItem("favorite_selcate_id",n.val()),!l.hasClass("hide"))return misc.empty(l)?showDialog("danger","","请填写分类名称",{closetime:1500}):showDialog("info","","收藏分类之前，请先按回车保存此分类名称",{closetime:1500}),l.focus(),!1;c.init(),i.data("ajaxFlag")&&(h={mod:"common",inc:"favorite","do":"add",ajaxsub:!0,formhash:formHash,randoms:Math.random()},h["subject_"+formHash]=misc.urlencode(i.val()),h["desc_"+formHash]=misc.urlencode(j.val()),h["type_"+formHash]=misc.urlencode(b),h["typemd5_"+formHash]=misc.urlencode(e),h["catmd5_"+formHash]=misc.urlencode(n.val()),h["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(h),beforeSend:function(){i.data("ajaxFlag",!1)},success:function(b){1==b.state?(win_state("icon-awesome-heart","已收藏","line-height:270px; font-size:40px;"),a.addClass("active"),$("[data-favoritenum=true]").text(b.favnum),a.find(f).text("已收藏"),closeDialog("favorite")):0==b.state?login_tip(g):-1==b.state?showDialog("danger","","您的请求来路不明确，无法收藏",{closetime:1500}):-2==b.state?showDialog("info","","已经收藏过了哦",{closetime:1500}):-3==b.state?showDialog("info","","此内容还未发布，无法收藏",{closetime:1500}):-4==b.state?showDialog("danger","","找不到对应的内容，无法收藏",{closetime:1500}):-5==b.state?showDialog("danger","","您还没有创建分类，或此分类无效",{closetime:1500}):-6==b.state&&showDialog("danger","","收藏失败，请重试",{closetime:1500})},complete:function(){i.data("ajaxFlag",!0)}}))}else showDialog("danger","","您还没有分类，请先创建分类",{closetime:1500})},!1,function(){var e,b=null;d.data("fav")&&(d.data("ajaxFlag")&&(c.init(),b={mod:"common",inc:"favorite","do":"category_get",ajaxsub:!0,formhash:formHash,randoms:Math.random()},b["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(b),beforeSend:function(){d.data("ajaxFlag",!1)},success:function(a){var f,b=localStorage.getItem("favorite_selcate_id"),c=null,e=0;if(n.data("nocat",!1),1==a.state){for(a=a.data,e=a.length,c=new StringBuffer,f=0;e>f;f++)c.append('<option value="'+a[f]["md5"]+'"'+(b==a[f]["md5"]?' selected="selected"':"")+">"+a[f]["name"]+"</option>");k.append(c.toString()),0>=e?n.data("nocat",!0).text("您还没有分类，请点击此处创建分类"):(k.removeClass("hide"),o.removeClass("hide")),j.focus()}else 0==a.state&&(n.data("nocat",!0).text("您还没有分类，请点击此处创建分类"),j.focus());d.data("fav",!1)},complete:function(){d.data("ajaxFlag",!0)}})),n.click(function(){k.addClass("hide"),o.addClass("hide"),n.addClass("hide"),m.removeClass("hide"),l.removeClass("hide").focus()}),e=function(){misc.empty(l)?(showDialog("info","","新分类名称不得为空",{closetime:1500}),l.focus()):(c.init(),b={mod:"common",inc:"favorite","do":"category_add",ajaxsub:!0,formhash:formHash,randoms:Math.random()},b["name_"+formHash]=misc.urlencode(l.val()),b["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(b),beforeSend:function(){l.data("ajaxFlag",!1)},success:function(a){var b=k.find("option");1==a.state?(b.prop("selected",!1),k.append('<option value="'+a.id+'" selected="selected">'+a.name+"</option>").removeClass("hide"),n.text("创建分类"),n.removeClass("hide"),l.addClass("hide").val(""),o.removeClass("hide"),m.addClass("hide"),n.removeData("nocat")):-1==a.state?(showDialog("info","","此分类已经存在",{closetime:1500}),l.val("")):-2==a.state?showDialog("danger","","分类最多添加100项，请合理分类，将收藏更好的归类",{closetime:2e3}):showDialog("danger","","新分类创建失败，请重试",{closetime:1500})},complete:function(){l.data("ajaxFlag",!0)}}))},l.data("ajaxFlag",!0).keydown(function(a){a.stopPropagation(),13==a.which?e():27==a.which&&(n.data("nocat")||(k.removeClass("hide"),o.removeClass("hide"),m.removeClass("hide"),n.text("创建分类")),n.removeClass("hide"),l.addClass("hide"),m.addClass("hide"))}),m.click(e))},{button1style:"hide",button2style:"btn-danger"}).parents(".w3cfunsui-dialog:first").find(".w3cfunsui-dialog-titlebar,.w3cfunsui-dialog-content").css("background-color","#f2f2f2").andSelf().find(".buttonBar").css({padding:"0","border-top":"0 none"})}return!1})}function praise(){var a,b;try{a=$("html"),b=$("[data-praise=true]"),b.data("ajaxFlag",!0).click(function(){var c=$(this),d=null,e=b.data("type"),f=b.data("id"),g=b.data("textselector"),h=b.data("point");if(c.hasClass("active"));else{if(a.init(),0>=MEMBER_ID)return login_tip(h),!1;b.data("ajaxFlag")&&(a.init(),d={mod:"common",inc:"praise","do":"add",ajaxsub:!0,formhash:formHash,randoms:Math.random()},d["type_"+formHash]=misc.urlencode(e),d["typemd5_"+formHash]=misc.urlencode(f),d["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(d),beforeSend:function(){b.data("ajaxFlag",!1)},success:function(a){1==a.state?(win_state("icon-awesome-thumbs-up","赞","line-height:370px; font-size:70px; text-indent:55px;"),c.addClass("active"),$("[data-praisenum=true]").text(a.praisenum),c.find(g).text("已点赞")):0==a.state?login_tip(h):-1==a.state?showDialog("danger","","您的请求来路不明确，无法收藏",{closetime:1500}):-2==a.state?showDialog("info","","已经赞过了哦",{closetime:1500}):-3==a.state?showDialog("info","","此内容还未发布，无法收藏",{closetime:1500}):-4==a.state?showDialog("danger","","找不到对应的内容，无法收藏",{closetime:1500}):-5==a.state?showDialog("danger","","您无法给自己点赞哦",{closetime:1500}):-6==a.state&&showDialog("danger","","点赞失败，请重试",{closetime:1500})},complete:function(){b.data("ajaxFlag",!0)}}))}return!1})}catch(c){}}function creditPrompt(){var a,b,c,d,e,f,g,h,i;try{if($("html").data("init")(),a=$.cookie("creditnotice").split("D"),b=$.cookie("creditbase").split("D"),c=decodeURI($.cookie("creditrule")).replace(String.fromCharCode(9)," "),!MEMBER_ID||a.length<2||a[9]!=MEMBER_ID)return $.cookie("creditnotice",null),$.cookie("creditrule",null),void 0;for(d=creditnotice.split(","),e=[],g=0,h=d.length;h>g;g++)f=d[g].split("|"),e[f[0]]=[f[1],f[2]];for(i="",g=1;8>=g;g++)v=parseInt(Math.abs(parseInt(a[g]))/5)+1,"0"!==a[g]&&e[g]&&(i+='<span class="mr10">'+e[g][0]+'<b class="font22 red_c00"> +'+a[g]+"</b>"+e[g][1]+"</span>"),a[g]>0?(a[g]=parseInt(a[g])-v,b[g]=parseInt(b[g])+v):a[g]<0&&(a[g]=parseInt(a[g])+v,b[g]=parseInt(b[g])-v);if(!i&&($.cookie("creditnotice",null),$.cookie("creditbase",null),$.cookie("creditrule",null),!i))return;i='<span class="font20">'+(c+"："+i)+"</span>",showDialog("success","",i,{closetime:3e3,open:function(){$.cookie("creditnotice",null),$.cookie("creditbase",null),$.cookie("creditrule",null)}})}catch(f){}}function common_comment(){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,a=$("button[data-comment=true]");return a.length<=0?!1:(b=$("html"),c=location.hash.toLowerCase(),d=null,e=$("#comment_link"),e.attr("href"),e.remove(),g=$(".comment-area:first"),h=$("#comment-list"),i=$("#comment-new"),j=i.find("#comment-empty"),c&&""!==c&&c.length>1&&i.find(c).addClass("light"),k=function(a,b,c){$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(b),beforeSend:function(){a.data("ajaxFlag",!1).prop("disabled",!0).text("请稍后...")},success:function(a){c&&c(a)},complete:function(){a.data("ajaxFlag",!0).prop("disabled",!1).text(a.data("text"))}})},l=function(a){var b,c,e,f,i,j,k,l;a.preventDefault(),a.stopPropagation(),$(".comment-bottombar .icons").popover("hide"),b=h.find(".comment-area"),b.slideUp(600,function(){b.remove()}),c=$(this),e=c.parents(".media:first"),f=g.clone(!1,!1),f.find(".media-cont").removeClass("first_pub"),f.prepend('<i class="arrow"></i>'),i=f.find(".media-left img.media-object"),i.attr("src",i.data("original")),p.one("click",function(){$(this);var b=h.find(".comment-area");b.slideUp(600,function(){b.remove()})}),j=e.find(".media-body"),k=j.find(".comment-author"),l=j.find("p:first"),"//@"+k.text()+":"+l.html(),f.find(".media-cont:first .comment-bottombar:first").append(p),f.insertAfter(e),o(f,!0,c.data("id"),d.length)},m=function(a){var c,e,f,g,h,i;a.preventDefault(),a.stopPropagation(),b.data("init")(),c=$(this),e=c.parents(".media:first"),f=d.type,g=d.typeid,h=d.typemd5,i={mod:"common",inc:"comment","do":"del",ajaxsub:!0,formhash:formHash,randoms:Math.random()},i["type_"+formHash]=misc.urlencode(f),i["typeid_"+formHash]=misc.urlencode(g),i["id_"+formHash]=misc.urlencode(h),i["delid_"+formHash]=c.data("id"),i["memberid_"+formHash]=misc.urlencode(MEMBER_ID),showDialog("danger","确认删除","您确定删除这条评论吗。",{key:"delete_confirm",icontip:!0,button1style:"btn-default",button2style:"btn-primary",texticonattr:{style:"top:20px; left:40px;"},textattr:{style:"top:32px; right:30px; left:115px;","class":"font24 lh30"},modal:!0,close:function(){closeDialog("delete_confirm")}},"确定删除",function(){k(c,i,function(a){a&&1==a.state?e.slideUp(300,function(){e.remove()}):a&&0==a.state?showDialog("danger","","无权进行此操作。",{closetime:2e3}):a&&-1==a.state?showDialog("danger","","删除失败，参数错误。",{closetime:2e3}):showDialog("danger","","删除失败，未知错误，请重试",{closetime:2e3})})},"取消删除",function(){closeDialog("delete_confirm")})},n=function(a){var c,e,f,g,h;a.preventDefault(),a.stopPropagation(),b.data("init")(),c=$(this),e=d.type,f=d.typeid,g=d.typemd5,h=null,c.data("ajaxFlag")&&(h={mod:"common",inc:"comment","do":"assent",ajaxsub:!0,formhash:formHash,randoms:Math.random()},h["type_"+formHash]=misc.urlencode(e),h["typeid_"+formHash]=misc.urlencode(f),h["id_"+formHash]=misc.urlencode(g),h["assendid_"+formHash]=c.data("id"),h["memberid_"+formHash]=misc.urlencode(MEMBER_ID),k(c,h,function(a){a&&1==a.state?(c.parents(".comment-assent:first").find("i:first").text("("+a.assentnum+")"),win_state("icon-awesome-angellist")):a&&0==a.state?showDialog("danger","","支持失败，缺少参数。",{closetime:2e3}):a&&-1==a.state?showDialog("danger","","支持失败，参数错误。",{closetime:2e3}):a&&-2==a.state?showDialog("info","","您已支持过，无需再次支持",{closetime:2e3}):a&&-3==a.state?showDialog("info","","您不能自己支持自己的观点",{closetime:2e3}):a&&-4==a.state?showDialog("danger","","支持失败，更新失败",{closetime:2e3}):showDialog("danger","","支持失败，数量更新失败",{closetime:2e3})}))},o=function(a,c,e,f){var m,o,p,q,r,s,t,u,v,w,x,y,z,g=!1,h=a.find(".btn_comment");return h?(m=parseInt(h.data("length")),m=m>0?m:300,m=f?f:m,o=m,p=0,q=a.find(".wordcount:first"),r=q.find("span:eq(0)"),s=q.find("span:eq(1)"),s.text(o),t=a.find(".comment-text:first"),!!c&&t.focus(),u="",v=null,w=a.find(".comment-bottombar"),x=w.find(".emot"),y=function(){u=t.val(),p=o-misc.getStrLength(u),0>p?(r.text("已超出"),s.addClass("red_c00").text(Math.abs(p)),g=!0):(g=!1,r.text("还可以输入"),s.removeClass("red_c00").text(p))},t.keyup(function(a){a.preventDefault(),a.stopPropagation(),y()}),misc.loadjs(RESJSPATH+"common/jquery.easing.js",function(){var a=$('<div class="comment-popemot popover pd0" role="tooltip"><div class="arrow"></div><div class="popover-content pd0"></div></div>').click(function(a){a.stopPropagation()}),b=emoticon_box(function(a,b){t.insertAtCaret("[emot="+a+"]"+b+"[/emot]"),x.popover("hide"),y()}).css("border","0 none");$(document).click(function(){x.popover("hide")}),x.click(function(a){a.stopPropagation()}).popover({container:"body",placement:"bottom",template:a,html:!0,title:"表情",content:b,trigger:"click"})}),z=w.find(".code"),codeicon_box(z,function(a,b,c,d){t.insertAtCaret("[code="+b+","+b+" 代码,"+c+"]"+d+"[/code]"),y()},!0),c||(d={commentArea:h.parents("#comment-area"),type:h.data("type"),_do:h.data("do"),typeid:h.data("typeid"),typemd5:h.data("typemd5"),length:m,commentbox_classname:h.data("commentbox")},h.removeAttr("data-comment"),h.removeAttr("data-type"),h.removeAttr("data-typeid"),h.removeAttr("data-typemd5"),h.removeAttr("data-length"),h.removeAttr("data-do"),h.removeAttr("data-commentbox")),h.data("ajaxFlag",!0).click(function(){var f,h,m,o,p,q,r,s;if(v=$(this),f=d.type,h=d.typeid,m=d.typemd5,o=parseInt(d.length),p=d._do,q=a.find(d.commentbox_classname+":first"),r=q.val(),s=null,a.find(".comment-quote:first").html(),new RegExp("<img.*src\\=('|\")(.*?)('|\").*?>"),""!=f&&""!=m&&o>0&&""!=p){if(v.data("ajaxFlag"))if(b.data("init")(),""!=r&&r.replace(/\s*/g,"").length>0&&!misc.isUndefined(r)&&"undefined"!=r)if(g)showDialog("info","","内容已超出系统限定字数，请精简后再发表。",{closetime:2e3});
else{if("1"===$.cookie("timecomment"))return showDialog("info","","您评论的太快了，两次评论之间至少间隔15秒哟。",{closetime:2e3}),!1;s={mod:"common",inc:"comment","do":p,ajaxsub:!0,formhash:formHash,randoms:Math.random()},s["type_"+formHash]=misc.urlencode(f),s["typeid_"+formHash]=misc.urlencode(h),s["id_"+formHash]=misc.urlencode(m),s["message_"+formHash]=misc.urlencode(r),s["memberid_"+formHash]=misc.urlencode(MEMBER_ID),c&&e&&(s["iddata_"+formHash]=misc.urlencode(e)),k(v,s,function(b){var d,e,f,h,k,m,o,p,r,s,t,u,v,w;g?showDialog("info","","内容已超出系统限定字数，请精简后再发表。",{closetime:2e3}):1==b.state?($.cookie("timecomment",1,{expires:.25}),$("[data-commentnum=true]").text(b.commentnum),d=$('<div class="media'+(i.find(".media:first").hasClass("odd")?"":" odd")+' cl"></div>'),e=$('<a class="media-left" href="house.php?uid='+b.uid+'" target="_blank"></a>'),f=$('<img class="media-object" alt="'+b.username+'" src="'+b.avatar+'"/>'),h=$('<div class="media-body"></div>'),k=$('<div class="media-heading"></div>'),m=$('<a href="house.php?uid='+b.uid+'" class="comment-author" target="_blank">'+b.username+"</a>"),o=$('<span class="comment-time"></span>'),p=$('<span class="storey">'+b.storeynum+"</span>"),r=$('<div class="details">'+misc.urldecode(b.content)+(b.quote?misc.urldecode(b.quote):"")+"</div>"),s=$('<em class="cl"></em>'),t=$('<span class="comment-report"><a href="javascript:;" data-id="'+b.ids+'" data-text="举报"><i class="icon-brankic-warning"></i>举报</a></span>'),u=$('<span class="comment-assent"><a href="javascript:;" data-id="'+b.ids+'" data-text="支持">支持</a> <i>(0)</i></span>'),v=$('<span class="comment-reply"><a href="javascript:;" data-id="'+b.ids+'" data-text="回复">回复</a> <i>(0)</i></span>'),w=$(misc.urldecode(b.dateline)),o.append(w),w.tooltip(),e.append(f),d.append(e),k.append(m),k.append(o),k.append(p),s.append(t),s.append(u),s.append(v),h.append(k),h.append(r),h.append(s),d.append(e),d.append(h),i.prepend(d),q.val(""),j.remove(),c&&(!!b.replynum&&b.replynum>0&&a.prev(".media:first").find(".comment-reply i:first").text("("+b.replynum+")"),setTimeout(function(){$("html,body").animate({scrollTop:i.offset().top-250},600)},1e3),a.slideUp(600)),d.find(".comment-reply a").click(l),d.find(".comment-assent a").data("ajaxFlag",!0).click(n),cm_getusercard(d),showDialog("success","","评论成功",{closetime:2e3}),codebox_event(r.find(".cm_codeblock")),comment_codebox_event(r.find("kbd"))):b.state&&"banned"==b.state?showDialog("danger","","评论失败，您已被系统禁言或禁止访问。",{closetime:2e3}):"-1"==b.state?showDialog("warning","","评论失败，error:403",{closetime:2e3}):"-2"==b.state?showDialog("danger","","内容中包含禁止关键字，请修改后再提交",{key:"closetime",closetime:2500}):showDialog("info","","评论失败",{closetime:2e3})})}else showDialog("info","","还没写内容呐，怎么发布呢？赶紧说两句儿吧～",{closetime:2e3})}else showDialog("danger","","评论功能加载失败，即将重新刷新，重新失败。",{closetime:3e3}),setTimeout(function(){location.reload()},3e3)}),void 0):!1},p=$('<button id="btn_closereply" type="button" class="btn_closereply btn btn-default pull-right mr10">取消回复</button>'),o(g),window.pjaxRequest=!0,q=!1,r=function(){q&&$("html,body").animate({scrollTop:i.offset().top-250},600),h.find(".comment-reply a").click(l).andSelf().find(".comment-assent a").data("ajaxFlag",!0).click(n).andSelf().find(".comment-delete").click(m),pjax_page(!1,i,r,h.find(".pagebar"),!1);var a=$("#jsconsole #js_contents");h.find(".cm_codeblock").each(function(b,c){codebox_event($(c),b,a)}),comment_codebox_event(h.find("kbd")),q=!0},r(),pjaxeven(!1,i,r),void 0)}function scrollanchor(){var b,c;try{b=$("html,body"),c=location.hash,b.scrollTop(0),!!c&&setTimeout(function(){var a=$(c);a.length?b.scrollTop(a.offset().top-250):(a=$(c.toLowerCase()),!!a.length&&b.scrollTop(a.offset().top-250))},2e3)}catch(d){}}function cm_ding(a,b){var c,d,e,f,g,h,i,j;return a=a?$(a):$(".fixed_auto_left"),b=b?$(b):$(".fixed_auto_right"),a.length<=0&&b.length<=0?!1:(c=$(window),d="fixed"==$("#navbar").css("position")?$("body").css("padding-top"):20,e=a,f=b,g=e.offset().top,h=f.offset().top,i=a.parents(".container:first"),i.length<=0&&(i=b.parents(".container:first")),j=function(){var o,p,q,r,s,t,u,v,w,x,a=c.scrollLeft(),b=c.scrollTop(),j=misc.maxHeight(),k=misc.maxViewHeight(),l=e.height(),m=f.height(),n=e.data("onlyset")?l>m:!1;return n&&(n=f.data("onlyset")?m>l:!1),l=e.data("onlyset")?0:e.height(),m=f.data("onlyset")?0:f.height(),o=e.outerWidth(!0),p=f.outerWidth(!0),q=l>m?f:e,r=l>m?e:f,s=i.width()-o-p,t=l>m?h:g,u=l>m?e.offset().left+o-a+s:f.offset().left-o-a-s,v=l>m?m:l,w=l>m?l:m,x=parseInt(w-k)-parseInt(v-k),e.removeAttr("style"),f.removeAttr("style"),n?!1:("none"!=r.css("display")&&(k>j||v>w||t-d>b||v-k+t>=b?q.removeAttr("style"):k>v&&b-t>=x||v>k&&b-t>=w-k?q.css("margin-top",x):q.css(k>v?{top:d,left:u,position:"fixed"}:{bottom:20,left:u,position:"fixed"})),void 0)},$(window).resize(j).scroll(j).trigger("resize"),void 0)}function cm_quickFollow(){var a=$("html"),b=$("[data-toggle=follow]");b.data("ajaxFlag",!0).each(function(b,c){var d,e,f,g,h,i,j,k,l;return c=$(c),d=c.data("follow_state"),e=parseInt(c.data("follow_uid")),f=c.data("follow_username"),g=c.data("follow_class"),g=g?g.split(","):[],h=c.data("follow_icon"),h=h?h.split(","):[],i=c.find("i:first"),3!=h.length?!1:(j=c.data("follow_text_selector"),j=j?c.find(j):c,k=c.data("follow_text"),k=k?k.split(","):["加关注","关注中..","已关注","取消关注","取消中..","互相关注"],l=null,c.hover(function(){2==g.length&&c.addClass(g[1]).removeClass(g[0]),j.text("followed"==d||"mutual"==d?k[3]:k[0])},function(){2==g.length&&c.addClass(g[0]).removeClass(g[1]),j.text("followed"==d||"mutual"==d?"mutual"==d?k[5]:k[2]:k[0])}).click(function(){if(a.data("init")(),0>=MEMBER_ID)return login_tip(),!1;var b=$(this);b.data("ajaxFlag")&&(a.data("init")(),l={mod:"social",inc:"follow","do":"followed"==d||"mutual"==d?"cancel":"plus",ajaxsub:!0,formhash:formHash,randoms:Math.random()},l["uid_"+formHash]=misc.urlencode(parseInt(e)),l["username_"+formHash]=misc.urlencode(f),l["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(l),beforeSend:function(){b.data("ajaxFlag",!1).prop("disabled",!0),j.text("followed"==d||"mutual"==d?k[4]:k[1])},success:function(a){a&&1==a.state&&(d=misc.urldecode(a.follow_state),2==g.length&&b.addClass(g[1]).removeClass(g[0]),"followed"==d?(j.text(k[2]),3==h.length&&i.addClass(h[1]).removeClass(h[0])):"mutual"==d?(j.text(k[5]),3==h.length&&i.addClass(h[2]).removeClass(h[0])):(j.text(k[0]),3==h.length&&i.addClass(h[0]).removeClass(h[1]).removeClass(h[2])),g=g.reverse())},complete:function(){b.data("ajaxFlag",!0).prop("disabled",!1)}}))}),void 0)})}function cm_quickNeighbor(){var a=$("html"),b=$("[data-toggle=neighbor]");b.data("ajaxFlag",!0).each(function(b,c){var d,e,f,g,h,i,j,k,l;c=$(c),d=c.data("neighbor_state"),e=parseInt(c.data("neighbor_uid")),f=c.data("neighbor_username"),g=c.data("neighbor_icon"),g=g?g.split(","):[],h=c.find("i:first"),i=c.data("neighbor_text_selector"),i=i?c.find(i):c,j=c.data("neighbor_text"),j=j?j.split(","):["加他邻居","处理中..","已为邻居","取消邻居","取消中.."],k=c.data("neighbor_gender"),j[0]="加"+(1>=k?"他":"她")+"邻居",l=null,c.hover(function(){"neighbored"==d&&h.removeAttr("class").addClass(g[2]),i.text("neighbored"==d?j[3]:j[0])},function(){"neighbored"==d&&h.removeAttr("class").addClass(g[1]),i.text("neighbored"==d?j[2]:j[0])}).click(function(){if(a.data("init")(),0>=MEMBER_ID)return login_tip(),!1;var b=$(this);b.data("ajaxFlag")&&(a.data("init")(),l={mod:"social",inc:"neighbor","do":"neighbored"==d?"cancel":"plus",ajaxsub:!0,formhash:formHash,randoms:Math.random()},l["uid_"+formHash]=misc.urlencode(parseInt(e)),l["username_"+formHash]=misc.urlencode(f),l["memberid_"+formHash]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(l),beforeSend:function(){b.data("ajaxFlag",!1).prop("disabled",!0),i.text("neighbored"==d?j[4]:j[1])},success:function(a){a&&1==a.state&&(d=misc.urldecode(a.neighbor_state),"neighbored"==d?(i.text(j[2]),h.removeAttr("class").addClass(g[1])):(i.text(j[0]),h.removeAttr("class").addClass(g[0])))},complete:function(){b.data("ajaxFlag",!0).prop("disabled",!1)}}))})})}function cm_convert2x(){var a=$("[data-toggle=convert2x]"),b="",c=[];ISRtina&&a.each(function(d,e){c="",e=a.eq(d),b=e.attr("src"),c=b.match(/\.[^\.]+$/),c=c.length>0?c[0]:c,b=b.replace(new RegExp("\\"+c+"$","i"),"@2x"+c),e.attr("src",b)})}function cm_getusercard(){}function global_init(){var a,d;try{a=$(window),$("body"),scrollanchor(),creditPrompt(),$("a,button").click(function(){$(this).blur()});try{!function(){var f,g,h,i,j,k,l,m,n,o,q,r,s,t,u,v,w,x,y,z,A,b=formHash,d=$("#navbar"),e=0;for(imgLoadCheck(),check_linksafe(),a.scroll(function(){e=a.scrollTop(),e>20?d.addClass("fixed_style"):d.removeClass("fixed_style")}),f=$("#shortcut_nav"),g=f.find(".shortcut_items.search"),h=g.find("span:first"),i=g.find("#nav_search"),j=2,k=function(){misc.fromRequest("search.php",{nsid:j,q:i.val()},"get")},g.hover(function(){i.focus().select()},function(){i.blur()}),i.keydown(function(a){13==a.which&&k()}),h.click(k),l=f.find(".shortcut_items:not(.search)"),m=l.eq(0),m.data("ajaxFlag",!0),n=m.find("#memberinfo_data"),o=n.html(),m.find("#nav_avatar img:first"),q=null,q=n.data("expval").split(","),r=0,s=q.length;s>r;r++)q[r]=q[r].split("|");t=function(a,c,d,e){$("html").data("init")();var g=null;m.data("ajaxFlag")&&(g={mod:"common",inc:"signature","do":"update",ajaxsub:!0,formhash:b,randoms:Math.random()},g["msg_"+b]=misc.urlencode(a),g["memberid_"+b]=misc.urlencode(MEMBER_ID),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(g),beforeSend:function(){m.data("ajaxFlag",!1)},success:function(b){1==b.state?(a=misc.urldecode(b.msg),c.text(a),m.find("#signaturelog").html(a),m.data("signaturelog",a),c.removeClass("hide"),d.addClass("hide"),e.val(a),e.blur(),u(c,a)):showDialog("danger","","心情未能保存成功，请重试",{closetime:1500})},complete:function(){m.data("ajaxFlag",!0)}}))},u=function(a,b){misc.getStrLength(b)>21?a.tooltip({animation:!0,html:!0,container:"body",placement:"top",title:b,trigger:"hover"}):a.tooltip("destroy")},v=function(a,b,c){pub_signaturelog_len=c-misc.getStrLength(b),0>pub_signaturelog_len?(a.eq(0).text("已超出"),a.eq(1).addClass("red_c00").text(Math.abs(pub_signaturelog_len))):(a.eq(0).text("还可以输入"),a.eq(1).removeClass("red_c00").text(pub_signaturelog_len))},m.data("avatar",!1).popover({animation:!0,html:!0,container:m,placement:"bottom",title:"",content:'<div id="shortcut_member">'+o+"</div>",delay:{show:200,hide:200},trigger:"hover"}).on("shown.bs.popover",function(){var c,d,e,f,g,h,i,k,l,a=m.find(".popover-content");m.find("#shortcut_icon"),c=a.find("#experience_bar:first"),d=a.find("#signaturelog"),e=a.find("#pub_signaturelog"),f=e.find(".wordcount"),g=f.find("span"),h=e.find("textarea:first"),i=40,k=h.val(),l=d.data("defval"),misc.placeholder(h),v(g,k,i),u(d,k),m.data("signaturelog")&&d.text(m.data("signaturelog")),d.click(function(a){a.preventDefault(),a.stopPropagation(),d.addClass("hide"),e.removeClass("hide"),h.focus(),d.text()==l&&h.val("")}),e.click(function(a){a.preventDefault(),a.stopPropagation()}),h.keyup(function(a){return a.preventDefault(),a.stopPropagation(),27==a.which?(d.removeClass("hide"),e.addClass("hide"),h.blur(),!1):(k=h.val(),13==a.which?(h.val(k.replace(/\n/g,"")),t(k,d,e,h,l),!1):(v(g,k,i),k=h.val(),void 0))}),c.tooltip({animation:!0,html:!0,container:"body",placement:"top",title:"当前"+q[0][0]+"值："+q[0][1]+"<br/> 距离升级还有："+(q[0][2]-q[0][1]),trigger:"hover"})}),n.remove(),w=l.eq(1),x=w.find("textarea:first"),w.popover({animation:!0,html:!0,container:w,placement:"bottom",title:"",content:x.val(),delay:{show:200,hide:200},trigger:"hover"}),x.remove(),y=l.eq(2),z=$('<div id="letters_content"><div class="progress" style="margin:20px 0; height:15px; line-height:15px;"><div class="progress-bar progress-bar-striped active font12" role="progressbar" style="width:100%; line-height:15px;">正在打开私信箱</div></div></div>'),A=!0,y.popover({animation:!0,html:!0,container:y,placement:"bottom",title:'<a href="manage.php?mod=letters&inc=private" target="_blank">查看全部私信</a>',template:'<div class="popover popover_letters" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:z,delay:{show:200,hide:200},trigger:"hover"}),l.data("flag",!0).on("shown.bs.popover",function(){var c=$(this),d=c.data("type"),e=[];"letters"==d&&A&&($("html").data("init")(),A=!1,e={mod:"common",inc:"letters","do":"hd_nav",ajaxsub:!0,formhash:b,randoms:Math.random()},e["memberid_"+b]=MEMBER_ID,$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(e),success:function(a){var b="";a&&a.length?($.each(a,function(a,c){b+='<div class="media">                                                                    <div class="media-left">                                                                        <a href="house.php?uid='+c.touid+'" target="_blank" class="avatar"><img class="media-object" src="'+misc.urldecode(c.touseravatar)+'" alt="'+misc.urldecode(c.tousername)+'"/></a>                                                                  </div>                                                                  <div class="media-body">                                                                         <span class="media-heading">您与 <a href="house.php?uid='+c.touid+'" target="_blank">'+misc.urldecode(c.tousername)+'</a> 有新消息 </span>                                                                        <button type="button" class="btn btn-default btn-xs" data-toggle="sendmsg" data-event="false" data-touid="'+c.touid+'">查看回复</button>                                                                   </div>                                                              </div>'}),b=$(b),send_message(function(a){var b,c,d;a=a.parents(".media"),b=a.parents(".popover-content:first"),c='<div class="alert text-center" role="alert" style="margin:5px;">您暂时没有新私信^_^</div>',d=$(c).hide(),a.slideUp(300,function(){a.remove(),b.find(".media").length||(private_pm_count=0,misc.clearTitleFlash(),b.html(d),d.slideDown(300),z.html(c),y.find(".newprompt:first").remove())})},b)):b='<div class="alert text-center" role="alert" style="margin:5px;">您暂时没有新私信^_^</div>',setTimeout(function(){z.html(b)},300)},complete:function(){}}))})}()}catch(c){}cm_ding(),cm_quickFollow(),cm_quickNeighbor(),cm_getusercard(),misc.titleFlash(),$("[data-toggle=hoverclass]").hover(function(){var a=$(this),b=a.data("hoverclass").split(",");2==b.length&&""!=b[1]?a.addClass(b[1]).removeClass(b[0]):a.addClass(b[0])},function(){var a=$(this),b=a.data("hoverclass").split(",");2==b.length&&""!=b[1]?a.addClass(b[0]).removeClass(b[1]):a.removeClass(b[0])}),$("[data-toggle=tooltip]").tooltip(),$("[data-toggle=popover]").popover(),$("#picright #wechar").popover({animation:!0,html:!0,container:"body",placement:"top",template:'<div class="popover popover_letters" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',title:"扫一扫，加微信",content:'<img width="120" height="120" alt="'+WEBNAME+'微信" src="'+RESPATH+'images/qrcode_wechar.png"/>',delay:{show:200,hide:200},trigger:"hover"}),d=$(".pagejumpbox .pagejump"),d.find("input").keydown(function(a){var b,c,d,e;a.stopPropagation(),b=$(this),c=b.parents("ul"),d=c.find(".pagejump_link:first").attr("href"),e=/.*?\.html/.test(d),d=d.replace(/\.html$/,""),13!=a.which||c.data("asyn")||(location.href=d+b.val()+(e?".html":"")+(b.data("hash")?"#"+b.data("hash"):""))}),send_message(),favorite(),praise(),report(),$(".seccodeimg").click(function(){var a=$(this),b=a.data("hash"),c=a.data("input");c&&$(c).val("").focus(),a.attr("src","misc.php?mod=seccode&update="+misc.random(1,999999999)+"&idhash="+b)}),common_comment(),edge_funcbtns(),cm_convert2x()}catch(c){}}var ISRtina,HTMLHEAD,HTMLNODE,BROWSER,CLIPBOARDSWFDATA,USERAGENT,ISMOBILE,BODY,PREFIX,StringBuffer,msViewportStyle,autoNavBar,misc,delete_effect,pjaxeven,pjax_catnav,pjax_page,convert,arr,edge_funcbtns,send_message,emoticon_box,comment_codebox_event,codebox_event,codeicon_box,dialogShake,showDialog,showDialogPanel,showDialogNoButtonPanel,showDialogTabs,closeDialog,exttype;if("function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),ISRtina=!!window.devicePixelRatio,HTMLHEAD=document.getElementsByTagName("head")[0],HTMLNODE=HTMLHEAD.parentNode,BROWSER={},CLIPBOARDSWFDATA="",USERAGENT=navigator.userAgent.toLowerCase(),ISMOBILE=USERAGENT.indexOf("mobile")>=0,BODY=document.body,PREFIX=function(){if(!window.getComputedStyle)return!1;var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1],c="WebKit|Moz|MS|O".match(new RegExp("("+b+")","i"))[1];return{dom:c,lowercase:b,css:"-"+b+"-",js:b[0].toUpperCase()+b.substr(1)}}(),StringBuffer=function(){this.array=new Array},StringBuffer.prototype.append=function(a){a.length&&this.array.push(a)},StringBuffer.prototype.toString=function(a,b){return a||(a=""),b?this.array.reverse().join(a):this.array.join(a)},StringBuffer.prototype.clear=function(){this.array=[]},String.prototype.substr_ch2en1=function(a,b){var c,d;for(c=a,d="";b>0;c++)d=this.charCodeAt(c),b-=256>d?1:2;return this.slice(a,c)},String.prototype.substr_ch1en2=function(a,b){var c,d;for(c=a,d="";b>0;c++)d=this.charCodeAt(c),b-=256>d?.5:1;return this.slice(a,c)},function(){var b,a=navigator.platform.toLowerCase();OSNAME="win32"==a||"windows"==a?"windows":"mac68k"==a||"macppc"==a||"macintosh"==a||"macintel"==a?"mac":"x11"==a?"unix":a.indexOf("linux")>-1?"linux":null,HTMLNODE.className+="os_"+OSNAME+" ",(b=USERAGENT.match(/msie ([\d]+)/))?(BROWSER.ie=parseInt(b[1]),HTMLNODE.className+="ie_all ie"+BROWSER.ie):(b=USERAGENT.match(/edge\/([\d]+)/))?(BROWSER.edge=parseInt(b[1]),HTMLNODE.className+="edge"):(b=USERAGENT.match(/firefox\/([\d]+)/))?BROWSER.firefox=parseInt(b[1],HTMLNODE.className+="firefox"):(b=USERAGENT.match(/chrome\/([\d\.]+)/))?BROWSER.chrome=parseInt(b[1],HTMLNODE.className+="chrome"):(b=USERAGENT.match(/opera.([\d]+)/))?BROWSER.opera=parseInt(b[1],HTMLNODE.className+="opera"):(b=USERAGENT.match(/version\/([\d]+).*safari/))?BROWSER.safari=parseInt(b[1],HTMLNODE.className+="safari"):0,BROWSER_NAME=b?b[0]:b,BROWSER.ie&&8==BROWSER.ie&&console.log("%c您使用的是IE8浏览器，由于本站使用了HTML5／CSS3等新技术应用，不能保证最佳浏览效果。","font-size:18px; color:#c00;")}(),ISMOBILE&&(msViewportStyle=document.createElement("style"),msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.getElementsByTagName("head")[0].appendChild(msViewportStyle)),BROWSER.ie&&BROWSER.ie<8&&!/misc\.php\?mod=upgradebrowser/.test(location.href)&&(location.href="/misc.php?mod=upgradebrowser"),BROWSER.ie<=6)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}if(autoNavBar=function(){$("#navbar").width($(window).width())},function(){var a=$("html");"undefined"==typeof variable&&(adminid=0),a.data({vars:[WEBNAME,WEBTITLE,STYLEID,STATICURL,VERHASH,charset,MEMBER_ID,formHash,cookiepre,cookiedomain,cookiepath,REPORTURL,SITEURL,JSPATH,CSSPATH,DYNAMICURL,attachurl,RESPATH,RESJSPATH,RESSWFPATH,adminid,creditnotice],init:function(){var b=a.data("vars");WEBNAME=b[0],WEBTITLE=b[1],STYLEID=b[2],STATICURL=b[3],VERHASH=b[4],charset=b[5],MEMBER_ID=b[6],formHash=b[7],cookiepre=b[8],cookiedomain=b[9],cookiepath=b[10],REPORTURL=b[11],SITEURL=b[12],JSPATH=b[13],CSSPATH=b[14],DYNAMICURL=b[15],attachurl=b[16],RESPATH=b[17],RESJSPATH=b[18],RESSWFPATH=b[19],adminid=b[20],creditnotice=b[21]}}),a.find("#initscript").remove()}(),misc={setTitle:function(a){$("title:first").text(WEBTITLE+a),clearTimeout(window.stTitleFlash),clearInterval(window.noticeFlag),setTimeout(misc.titleFlash,16)},titleFlash:function(){var a=$("title:first"),b=a.text(),c=0,d=0,e=function(){/my\.php\?mod\=notify/.test(location.href)||!notify_sum_num&&!private_pm_count||(window.noticeFlag=setInterval(function(){a.text((c?"【　　　】":"【新提醒】")+b),c=c?0:1,d++,d>6&&(c=d=0,clearInterval(window.noticeFlag),window.stTitleFlash=setTimeout(e,3e3))},500))};e()},clearTitleFlash:function(){if(!notify_sum_num&&!private_pm_count){clearInterval(window.noticeFlag);var a=$("title:first");a.text(a.text().replace(/【.*】/,""))}},isUndefined:function(a){return"undefined"==typeof a?!0:!1},empty:function(a){return""==a.val()&&!a.val().length},htmlspecialchars:function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/\</g,"&lt;"),a=a.replace(/\>/g,"&gt;"),a=a.replace(/\'/g,"&#039;"),a=a.replace(/\"/g,"&quot;")},unhtmlspecialchars:function(a){return a=a.replace(/\&amp\;/g,"&"),a=a.replace(/\&lt\;/g,"<"),a=a.replace(/\&gt\;/g,">"),a=a.replace(/\&#039\;/g,"'"),a=a.replace(/\&quot\;/g,'"')},getStrLength:function(a,b,c){b||(b=1),c||(c=.5);var d=0,e=0,f=0;return 1==b&&.5==c?(d=Math.abs(a.replace(/[\x00-\xff]*/g,"").length),e=Math.abs(Math.ceil(a.replace(/[^\x00-\xff]*/g,"").length/2)),f=d+e+""):f=2==b&&1==c?Math.abs(a.replace(/[^\x00-\xff]/g,"**").length):3==b&&1==c?Math.abs(a.replace(/[^\x00-\xff]/g,"***").length):a.length,f},urlencode:function(a){return encodeURIComponent(a)},urldecode:function(a){return decodeURIComponent(a)},betweenLength:function(a,b,c,d){var e="string"==typeof a?a:a.val(),f=d?misc.getStrLength(e,2,1):misc.getStrLength(e,1,1);return f>=b&&c>=f},betweenEquis:function(a,b){var c="string"==typeof a?a:a.val(),d="string"==typeof b?b:b.val();return c===d},bedFormat:function(a,b){var c="string"==typeof a?a:a.val();return!b.test(c)},isNumber:function(a){return!isNaN(a)},maxWidth:function(){return Math.max(document.documentElement.clientWidth,document.body.offsetWidth)},maxHeight:function(){return Math.max(document.documentElement.clientHeight,document.body.offsetHeight)},maxViewWidth:function(){return $(window).width()},maxViewHeight:function(){return $(window).height()},random:function(a,b){return parseInt(Math.random()*(b-a+1)+a)},timestamp:function(){return Date.parse(new Date)/1e3},timestamp_ms:function(){return Date.parse(new Date)},convertSize:function(a){var b,c,d;return a?(b=["b","kb","mb","gb","tb","pb","eb","zb","yb"],c=Math.floor(Math.log(a)/Math.log(1024)),d=c>1?2:0,(a/Math.pow(1024,Math.floor(c))).toFixed(d)+b[c]):"0 Bytes"},getVideoSwf:function(a,b){var c,d,e,f,g,h,i,j,k;try{if(c=null,!a)return!1;switch(c=a.match(/http:\/\/(.*?)?\.(.*?)?\.com\/(.*)/),d=c[2],e=c[1],f=".swf".indexOf(c[3])>0,g=c[3].substr(0,1),h="",d){case"youku":"player"==e?h=a:"v"==e?(i=a.match(/http:\/\/v\.youku\.com\/v_show\/id_(.*)?\.html/),h="http://static.youku.com/v/swf/qplayer.swf?VideoIDS="+i[1].replace("/","")+(b?"&isAutoPlay=true":"")):h=a;break;case"tudou":f?h=a:(g="p"==g?"v":g,i=a.match(/http:\/\/www.tudou\.com\/(.*)?\/(.*)?/),str_arr=i[1].split("/"),j=str_arr.length,k="",1==j?k=i[2].split(".")[0]:2==j?k=str_arr[1]:3==$count&&(k=str_arr[2]),h="http://www.tudou.com/"+g+"/"+k+(b?"&autoPlay=true":"")+"/v.swf");break;case"qq":f?h=a:(i=a.match(/vid\=(\w*)/),h="http://static.video.qq.com/TPout.swf?vid="+i[1]+(b?"&auto=1":""));break;case"letv":f?h=a:(i=a.match(/(\d*)\.html/),h="http://www.letv.com/player/swfPlayer.swf?id="+i[1]+(b?"&autoplay=1":"&autoplay=0"));break;case"ku6":f?h=a:(i=a.match(/show\/(.*)\.{1}/),h="http://player.ku6.com/refer/"+i[1]+"/v.swf"+(b?"&auto=1":""));break;case"yinyuetai":f?h=a:(i=a.match(/video\/(\d*)/),h="http://player.yinyuetai.com/video/player/"+i[1]+"/"+(b?"a":"v")+"_0.swf");break;case"ifeng":f?h=a:(i=a.match(/([\w-]*)(\.shtml|)$/),h="http://v.ifeng.com/include/exterior.swf?guid="+i[1]+(b?"&AutoPlay=true":""));break;default:h=""}}catch(l){h=a}return h},loadjs:function(a,b){var c,d;(a.indexOf(".w3cfuns.")>0||a.indexOf("res/")>0)&&(a=a.replace(".js",js_loadmin+".js")),1==$("script[src*="+a.replace(/\:/g,"\\:").replace(/\//g,"\\/").replace(/\./g,"\\.")+"]").length?b&&b():(c=document.createElement("script"),d=$(c),c.type="text/javascript",c.src=a.replace(/\\:/,":")+(a.indexOf("?")>=0?"&":"?")+VERHASH,document.body.appendChild(c),c.onload=c.onreadystatechange=function(){var a=d.data("isload");this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||a||(d.data("isload",!0),b&&b())})},loadcss:function(a,b){var d,c=a.split("/");"plugin"==c[0]||"common"==c[0]?a=CSSPATH.replace("styles","styles/"+c[0]):"global"==c[0]&&(a=CSSPATH),a=a+STYLEID+"_"+c[1],1==$("link[href*="+a.replace(/\//g,"\\/").replace(/\./g,"\\.")+"]").length?b&&b():(d=document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=a.replace(/\\:/,":")+"?"+VERHASH,$("head").append(d),d.onload=d.onreadystatechange=function(){(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)&&b&&b()})},fromRequest:function(a,b,c,d,e){var g,h,i,f=$("<form></form>");f.attr({"class":"hidden",action:a,method:(c?c:"get").toUpperCase(),target:d?d:"_blank"}),e?($("html").data("init")(),f.append('<input name="formhash" value="'+formHash+'"/>'),e="_"+formHash):e="",g="",h="";for(i in b)"object"==typeof b[i]?(g=b[i]["nohash"]?i:i+e,h=b[i]["val"]):(g=i+e,h=b[i]),f.append('<input name="'+g+'" value="'+h+'"/>');$("body").append(f),f.submit()},refresh_seccode:function(a){a.attr("src","misc.php?mod=seccode&update="+misc.random(1,999999999)+"&idhash="+a.data("hash"))},geetest:function(a,b){var c=$("[data-geetest=true]"),d=null,f=null,g=null;return c.length>0&&(f=function(d){misc.loadjs(d.script.replace(/\//,"/"),function(){var e=function(b){b.appendTo(c),b.onReady(function(){c.find(".gt_slider div").attr("style","font-size:14px!important; font-family:arial,verdana,Microsoft YaHei,Tahoma,Simsun,sans-serif!important;"),c.find(".gt_guide_tip:first").text("请向右拖动滑块，完成验证。")}),b.onStatusChange(function(){c.find(".gt_info_tip .gt_info_text span").attr("style","font-family:arial,verdana,Microsoft YaHei,Tahoma,Simsun,sans-serif!important")}),b.onSuccess(function(){var c=b.getValidate();!!c&&!!a&&a([b,[c.geetest_challenge,c.geetest_validate,c.geetest_seccode]])})};window.initGeetest?initGeetest({gt:d.gt,challenge:d.challenge,product:b?b:"float",offline:!d.success},e):(g=new window.Geetest({gt:d.gt,challenge:d.challenge,product:b?b:"float",offline:!d.success}),e(g))})},d={mod:"common",inc:"validate","do":"geetest",ajaxsub:!0,formhash:formHash,randoms:Math.random()},$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(d),success:function(a){f(a)}}),window.gt_custom_ajax=function(b,c){var e,f,g,h;b&&("function"==typeof c?(e=[c(".geetest_challenge"),c(".geetest_validate"),c(".geetest_seccode")],f=e[0].value,g=e[1].value,h=e[2].value):(e=$("#"+c+" input"),f=e.eq(0).val(),g=e.eq(1).val(),h=e.eq(2).val()),!!a&&a([f,g,h]))}),!1},support_css3:function(a){var c,b=["webkit","Moz","ms","o"],d=[],e=document.documentElement.style,f=function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})};for(c in b)d.push(f(b[c]+"-"+a));d.push(f(a));for(c in d)if(d[c]in e)return!0;return!1},setCopy:function(a,b,c,d){a.hide();var e=this;e.loadjs(RESJSPATH+"plugin/clipboard/ZeroClipboard.js",function(){a.mouseover(function(){a.data("stylehover")?a.data("styledefault")||a.data("styledefault",a.css(["color","border-color","background-color"])):a.data("stylehover",a.css(["color","border-color","background-color"]))}),a.data("text",a.html()),setTimeout(function(){a.fadeIn(),ZeroClipboard.config({moviePath:RESSWFPATH+"clipboard/ZeroClipboard.swf"});var e=new ZeroClipboard(a);e.on("load",function(){e.on({mouseOver:function(){a.css(a.data("stylehover")),d&&d("over")},mouseOut:function(){a.removeAttr("style"),d&&d("out")},mouseDown:function(){e.setText(b)},complete:function(){a.html(c),setTimeout(function(){a.html(a.data("text")).blur()},1500)}})}),e.on("noflash wrongflash",function(){misc.support_flash(),ZeroClipboard.destroy()})},3e3)})},induction_position:function(a,b){var c=a.width(),d=a.height(),e=0,f={},g=(b.pageX-a.offset().left-c/2)*(c>d?d/c:1),h=(b.pageY-a.offset().top-d/2)*(d>c?c/d:1);switch(e=Math.round((Math.atan2(h,g)*(180/Math.PI)+180)/90+3)%4){case 0:f.left=0,f.top="-100%";break;case 1:f.left="100%",f.top=0;break;case 2:f.left=0,f.top="100%";break;case 3:f.left="-100%",f.top=0}return f},share:function(a,b,c,d,e,f){var g,h,i,j;f=f?f:location.href,g=(e?e:"")+b+" 感兴趣，就猛戳："+f+" (分享来自 @前端网W3Cfuns - WEB前端开发工程师专业网站，一站式服务平台)",b+=" (分享来自 @前端网W3Cfuns - 前端开发工程师互动平台)",h=510,i=495,j=new StringBuffer,c&&c.length>0&&c.each(function(a,b){j.append(encodeURIComponent(b.src))}),"sina_weibo"==a?url="http://service.weibo.com/share/share.php?title="+encodeURIComponent(g)+(j.array.length?"&pic="+j.array[0]:""):"tencent_weibo"==a?url="http://share.v.t.qq.com/index.php?c=share&a=index&title="+encodeURIComponent(g)+(j.array.length?"&pic="+j.toString("|"):""):"qq_firend"==a?(h=750,i=600,url="http://connect.qq.com/widget/shareqq/index.html?url="+encodeURIComponent(f)+"&title="+encodeURIComponent(b)+(d?"&summary="+d:"")+(j.array.length?"&pic="+j.toString("|",!0):"")):"qqzone"==a&&(h=600,i=450,url="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(f)+"&title="+encodeURIComponent(b)+(d?"&summary="+d:"")+(j.array.length?"&pic="+j.toString("|",!0):"")),("sina_weibo"==a||"tencent_weibo"==a||"qq_firend"==a||"qqzone"==a)&&misc.win_popup(url,"分享",h,i,!0)},support_flash:function(a){ISMOBILE||localStorage.supportFlashTipNo||showDialog("text","重要提示",a?"无法加载Flash，可能没有正确安装 Adobe Flash Player，是否去官网下载并安装？":"此页面需要Flash的支持，您的系统或浏览器没有安装 Adobe Flash Player 组件，是否去官网下载并安装？",{key:"support_flash",button1style:"btn-default",button2style:"btn-primary",modal:!0},"不再提示",function(){localStorage.supportFlashTipNo=!0},"立即安装",function(){window.open("http://www.adobe.com/go/getflash"),showDialog("info","重要提示","如果FlashPlayer已安装完毕，请点击下方刷新按钮即可，若是刷新后无效，一般重启浏览器即可。",{modal:!0},"刷新",function(){location.reload(!0)})},[{text:"暂不安装",style:"btn-danger",fn:function(){closeDialog("support_flash")}}])},launchFullscreen:function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():window.open(a.src)},placeholder:function(a){!(a instanceof jQuery)&&(a=$(a)),BROWSER.ie<=9&&$(function(){try{a.placeholder()}catch(b){}})},win_popup:function(a,b,c,d,e){var h,f=0,g=0;return c>0&&d>0&&(f=(screen.width-c)/2,g=(screen.height-d)/2,e&&(e+=", left="+f+", top="+g+", width="+c+", height="+d+"toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no",e=e.replace(/^,/,""))),h=window.open(a,b,e),h.focus(),h},win_close:function(){try{BROWSER.ie&&(window.opener=null),window.open("","_self",""),window.close()}catch(a){try{window.opener=null,window.open("","_self"),window.close()}catch(a){window.close()}}}},delete_effect=function(a,b,c,d){var e=null,f=0;!!b||(b=$("#tab-content")),d&&(e=$("#recycle_num"),f=e.text(),f=f?parseInt(f):0,f+=d),BROWSER.ie&&BROWSER.ie<10?(a.remove(),b.find(c).length<1&&location.reload(),d&&e&&e.text(f)):(a.addClass("delete_effect"),setTimeout(function(){a.remove(),b.find(c).length<1&&location.reload(),console.log(b.find(c).length),d&&e&&e.text(f)},600))},pjaxeven=function(a,b,c,d){var i,e=null,f=null,g=null,h=null;if(history.pushState){d&&(e=d.find("li"),f=e.find("a"),g=d.find("li.active"),h=g.find("a:first")),setTimeout(function(){$(window).on("popstate",function(){if(history.state){history.state.newtitle&&misc.setTitle(history.state.newtitle),b.html(history.state.data);try{setTimeout(function(){b.find("img").lazyload({effect:"fadeIn",skip_invisible:!1})},300)}catch(a){}!!c&&c(),d&&e.removeClass("active").eq(history.state.tabinx).addClass("active")}})},1e3),i={url:location.href,data:b.html()},!!a&&(i["newtitle"]=a),!!d&&(i["tabinx"]=e.index(g)),history.replaceState(i,"",i.url);try{setTimeout(function(){b.find("img").lazyload({effect:"fadeIn",skip_invisible:!1})},300)}catch(j){}}},pjax_catnav=function(a,b,c,d,e,f){history.pushState&&(e=e?e:"success",d.find("dd a").click(function(d){var e,g;d&&d.stopPropagation(),d&&d.preventDefault(),e=$(d.target).attr("href"),$("html").data("init")(),g={inpjax:1,pjax_type:"page",formhash:formHash,randoms:Math.random()},window.pjaxRequest&&"javascript:;"!=e&&$.ajax({type:"POST",cache:!1,url:e,dataType:"html",data:$.param(g),beforeSend:function(){!!a&&showDialog("loading",null,1==a?"正在处理中，请稍后...":a,{key:"pjaxloding",loadingstyle:"success"}),window.pjaxRequest=!1,b.stop(!1,!0).fadeOut(300),history.pushState(history.state,"",e)},success:function(a){b.html(a);try{setTimeout(function(){b.find("img").lazyload({effect:"fadeIn",skip_invisible:!1})
},300)}catch(d){}c();var g={url:e,data:b.html()};!!f&&(g["tabinx"]=tabsli.index(stateTab)),history.replaceState(g,"",e)},complete:function(){!!a&&closeDialog("pjaxloding"),b.stop(!1,!0).fadeIn(300),window.pjaxRequest=!0},error:function(){location.href=e}})}))},pjax_page=function(a,b,c,d,e,f){var g,h,i;history.pushState&&(e=e?e:"success",d=(d?d:b).find(".pagination-media"),f&&(tabsli=f.find("li"),tabslia=tabsli.find("a"),stateTab=f.find("li.active"),stateTaba=stateTab.find("a:first")),d.data("asyn")&&(g=d.find(".pagejump_link:first"),h=g.attr("href"),i=/.*?\.html/.test(h),h=h.replace(/\.html$/,""),pagebox=d.find("li:not(.active,.pagejumpbox)"),pagelink=pagebox.find("a"),pagejump=d.find(".pagejumpbox .pagejump"),pagejump.find("input").keydown(function(d){var g,j,k;d&&d.stopPropagation(),_this=$(this),g=parseInt(pagejump.find("label span:first").attr("title").match(/\d+/)[0]),j=_this.val()<g?_this.val():g,_url=h+(i?".html":"")+j+(_this.data("hash")?"#"+_this.data("hash"):""),$("html").data("init")(),k={inpjax:1,pjax_type:"page",formhash:formHash,randoms:Math.random()},window.pjaxRequest&&13==d.which&&$.ajax({type:"POST",cache:!1,url:_url,dataType:"html",data:$.param(k),beforeSend:function(){!!a&&showDialog("loading",null,1==a?"正在处理中，请稍后...":a,{key:"pjaxloding",loadingstyle:e}),b.stop(!1,!0).fadeOut(300),history.pushState(history.state,"",_url),window.pjaxRequest=!1},success:function(a){b.html(a);try{setTimeout(function(){b.find("img").lazyload({effect:"fadeIn",skip_invisible:!1})},300)}catch(d){}c();var e={url:_url,data:a};!!f&&(e["tabinx"]=tabsli.index(stateTab)),history.replaceState(e,"",_url)},complete:function(){!!a&&closeDialog("pjaxloding"),b.stop(!1,!0).fadeIn(300),window.pjaxRequest=!0},error:function(){location.href=_url}})}),pagelink.click(function(d){d&&d.stopPropagation(),d&&d.preventDefault(),_url=$(d.target).attr("href"),$("html").data("init")();var e={inpjax:1,pjax_type:"page",formhash:formHash,randoms:Math.random()};window.pjaxRequest&&"javascript:;"!=_url&&$.ajax({type:"POST",cache:!1,url:_url,dataType:"html",data:$.param(e),beforeSend:function(){!!a&&showDialog("loading",null,1==a?"正在处理中，请稍后...":a,{key:"pjaxloding",loadingstyle:"success"}),window.pjaxRequest=!1,b.stop(!1,!0).fadeOut(300),history.pushState(history.state,"",_url)},success:function(a){b.html(a);try{setTimeout(function(){b.find("img").lazyload({effect:"fadeIn",skip_invisible:!1})},300)}catch(d){}c();var e={url:_url,data:b.html()};!!f&&(e["tabinx"]=tabsli.index(stateTab)),history.replaceState(e,"",_url)},complete:function(){!!a&&closeDialog("pjaxloding"),b.stop(!1,!0).fadeIn(300),window.pjaxRequest=!0},error:function(){location.href=_url}})})))},convert={units:{kb_2_mb:function(a){return a>=1024?(a=parseFloat(a/1024).toFixed(2),("1.00"==a?1:a)+"MB"):a+"KB"}}},arr={in_array:function(a,b){if("string"==typeof a||"number"==typeof a)for(var c in b)if(b[c]==a)return!0;return!1}},+function(a){a.extend({cookie:function(a,b,c){var d,e,f,g,h,i,j,k,l;if(a=cookiepre+a,"undefined"==typeof b){if(i=null,document.cookie&&""!=document.cookie)for(j=document.cookie.split(";"),k=0;k<j.length;k++)if(l=jQuery.trim(j[k]),l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}return i}c=c||{},null===b&&(b="",c.expires=-1),d="",c.expires&&("number"==typeof c.expires||c.expires.toUTCString)&&("number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+1e3*60*c.expires)):e=c.expires,d="; expires="+e.toUTCString()),f=c.path?c.path:cookiepath,g=c.domain?c.domain:cookiedomain,f=f?"; path="+f:"",g=g?"; domain="+g:"",h=c.secure?"; secure":"",document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")}})}(jQuery),+function(a){a.fn.insertAtCaret=function(a){return this.each(function(){var b,c,d;document.selection?(this.focus(),sel=document.selection.createRange(),sel.text=a,this.focus()):this.selectionStart||"0"==this.selectionStart?(b=this.selectionStart,c=this.selectionEnd,d=this.scrollTop,this.value=this.value.substring(0,b)+a+this.value.substring(c,this.value.length),this.focus(),this.selectionStart=b+a.length,this.selectionEnd=b+a.length,this.scrollTop=d):(this.value+=a,this.focus())})}}(jQuery),edge_funcbtns=function(){var b,c,d,e,f,g,h,i,j,k,l,m,a=location.href.replace(SITEURL,"").replace(/(\/|\.php).*/,"");return"mobile"==a?!1:(b=$(window),c=$("body,html"),d=$("body"),e=$(".container:first"),f=misc.maxViewWidth(),g=e.width(),h=new StringBuffer,h.append('<ul id="edge_funcbtns">'),h.append('<li><a href="/feedback.php?mod=publish" target="_blank" class="edge_btn_text bg_danger"><span>改版反馈</span><i class="glyphicon glyphicon-send font30"></i></a></li>'),h.append('<li id="backtop"><a href="javascript:;"><i class="glyphicon glyphicon-menu-up font28"></i></a></li>'),h.append("</ul>"),i=h.toString(),d.append(i),h.clear(),j=d.find("#edge_funcbtns"),j.stop(!0,!0).fadeIn(600),k=j.find("#backtop"),l=0,m=function(){f=misc.maxViewWidth(),g=e.width(),g+70>=f||d.hasClass("autowidth")?j.css("right",0):(l=(f-g)/2,j.css("right",l-70))},m(),b.resize(m).scroll(function(){b.scrollTop()>300?k.stop(!0,!0).fadeIn(600):k.stop(!0,!0).fadeOut(600)}),k.click(function(){c.stop(!0,!0).animate({scrollTop:0},300)}),void 0)},send_message=function(a,b){var c=$("html"),d=formHash,e=b?b.find("[data-toggle=sendmsg][data-event=false]"):$("[data-toggle=sendmsg][data-event=false]");e.each(function(a,b){var b=$(b);b.data("senduid",b.data("touid"))}).attr("data-event","true"),e.click(function(b){var e,f,g,h,i,j;return c.data("init")(),0>=MEMBER_ID?(login_tip(),!1):(b&&b.stopPropagation(),b&&b.preventDefault(),e=MEMBER_ID,f=$(this),g=f.data("senduid"),h=!1,$("html").data("init")(),i={mod:"manage",inc:"letters","do":"letters_sendbox",ajaxsub:!0,formhash:d,randoms:Math.random()},i["memberid_"+d]=misc.urlencode(e),i["touid_"+d]=g,j=$(".w3cfunsui-dialog .dialog_letters_send_"+g),j.length?dialogShake(j):e==g?showDialog("danger","","您不能给自己发送消息哟～",{key:g,closetime:2e3}):$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(i),beforeSend:function(){showDialog("loading","","正在建立会话，请稍后",{key:"letters_send_loading",loadingstyle:"primary"})},success:function(b){var c,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return b.state&&"no_touid"==b.state?(showDialog("danger","","无效的请求，请重试",{closetime:2e3}),!1):b.state&&"self"==b.state?(showDialog("danger","","您不能给自己发送消息哟～",{key:g,closetime:2e3}),!1):b.state&&"banned"==b.state?(showDialog("danger","","很抱歉，您已被系统禁言，无法发起会话！",{key:g,closetime:2e3}),!1):b.state&&"tobanned"==b.state?(showDialog("danger","","很抱歉，对方已被系统禁言，无法建立会话！",{key:g,closetime:2e3}),!1):(c=$('<div class="char-head cl"></div>'),i=$('<img class="avatar pull-left" alt="'+misc.urldecode(b.touname)+'" src="'+b.avatar+'"/>'),j=$('<div class="uinfo"></div>'),k=$('<p>正在与 <a href="house.php?uid='+b.touid+'" target="_blank">'+misc.urldecode(b.touname)+"</a> 聊天中...</p>"),h=parseInt(b.online)>0,l=$("<em>[当前"+(h?"在线":"离线")+"]</em>"),j.append(k),j.append(l),c.append(i),c.append(j),m=$('<div class="char-msg"></div>'),n=$('<div class="buttonBar"></div>'),o=$('<button type="button" class="btn btn-primary" data-text="发送(ctrl+enter)">发送(ctrl+enter)</button>'),n.append(o),p=showDialog("custom","连接中，请稍后",m,{key:"letters_send_"+g,width:520,height:580}).addClass("char-body"),a&&a(f),q=p.parents(".w3cfunsui-dialog:first").addClass("char-window").append(n),q.find(".w3cfunsui-dialog-title:first").html(c),r=$('<div class="w3cfuns_editor"><textarea></textarea><div class="checkbox font12 lh20"><label><input type="checkbox" checked="checked">我同意：如若发布有关广告、招聘等骚扰类私信，一经发现则删除相关消息并封号等处分</label></div></div>'),s=r.find(":checkbox:first"),p.append(r),t=function(a,b){setTimeout(function(){a&&v.focus(),m.scrollTop(b?m[0].scrollHeight-m.data("scrollTopNum"):m[0].scrollHeight)},16)},t(!0),u="",$.each(b.pmlist,function(a,b){u+='<div id="pmid_'+b.pmid+'" class="msgbox pull-'+(b.authorid==e?"right":"left")+' cl">                             <div class="timebar text-'+(b.authorid==e?"right":"left")+' font12">'+b.dateline+'</div>                                <div class="bubbles '+(b.authorid==e?"bg_my pull-right":"bg_default pull-left")+'"><i class="arrow"></i>'+misc.urldecode(b.message)+"</div>                         </div>"}),m.append(u).data({scrollTopNum:m[0].scrollHeight,online:b.online,pmcount:b.pmcount,pmallpage:b.pmallpage,pmnowpage:1,uid:b.uid,touid:b.touid,flag:!0}).scroll(function(){var a=$(this),b={};a.scrollTop()<=0&&a.data("flag")&&a.data("pmnowpage")<a.data("pmallpage")&&(a.data({flag:!1,pmnowpage:a.data("pmnowpage")+1,scrollTopNum:a[0].scrollHeight}),$("html").data("init")(),b={mod:"manage",inc:"letters","do":"letters_get",ajaxsub:!0,formhash:d,randoms:Math.random()},b["memberid_"+d]=misc.urlencode(a.data("uid")),b["pmpagesize_"+d]=10,b["pmpage_"+d]=misc.urlencode(a.data("pmnowpage")<=a.data("pmallpage")?a.data("pmnowpage"):0),b["touid_"+d]=misc.urlencode(g),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(b),beforeSend:function(){},success:function(b){var c="";b&&($.each(b,function(a,b){c+='<div id="pmid_'+b.pmid+'" class="msgbox pull-'+(b.authorid==e?"right":"left")+' cl">                                                       <div class="timebar text-'+(b.authorid==e?"right":"left")+' font12">'+b.dateline+'</div>                                                        <div class="bubbles '+(b.authorid==e?"bg_my pull-right":"bg_default pull-left")+'"><i class="arrow"></i>'+misc.urldecode(b.message)+"</div>                                                 </div>"}),a.prepend(c))},complete:function(){t(!1,!0),a.data("flag",!0)}}))}),h&&m.data({online_time:misc.timestamp(),online_time_si:setInterval(function(){var a={};$(".dialog_letters_send_"+g).length<=0||!h?clearInterval(m.data("online_time_si")):misc.timestamp()-m.data("online_time")>10&&($("html").data("init")(),a={mod:"manage",inc:"letters","do":"letter_get",ajaxsub:!0,formhash:d,randoms:Math.random()},a["memberid_"+d]=misc.urlencode(e),a["touid_"+d]=misc.urlencode(g),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(a),beforeSend:function(){},success:function(a){h=a.online,a.message.length&&$("#pmid_"+a.message[0].pmid).length<=0&&(m.append('<div id="pmid_'+a.message[0].pmid+'" class="msgbox pull-'+(e==a.message[0].touid?"left":"right")+' cl">                                                           <div class="timebar text-'+(e==a.message[0].touid?"left":"right")+' font12">'+a.message[0].dateline+'</div>                                                         <div class="bubbles bg_'+(e==a.message[0].touid?"default pull-left":"green pull-right")+'"><i class="arrow"></i>'+misc.urldecode(a.message[0].message)+"</div>                                                      </div>"),setTimeout(function(){m.scrollTop(m[0].scrollHeight)},20))},complete:function(){m.data("online_time",misc.timestamp())}}))},5500)}),v=r.find("textarea:first"),v.data({flag:!0,time:0}),w=function(){var a={};s.prop("checked")?misc.empty(v)?(showDialog("warning","","您想发送什么消息呢？",{closetime:1500}),t(!0)):misc.timestamp()-v.data("time")>8?v.data("flag")?($("html").data("init")(),a={mod:"manage",inc:"letters","do":"sendpm",ajaxsub:!0,formhash:d,randoms:Math.random()},a["plid_"+d]=misc.urlencode(b.plid),a["memberid_"+d]=misc.urlencode(e),a["touid_"+d]=misc.urlencode(g),a["message_"+d]=misc.urlencode(v.val()),$.ajax({type:"POST",cache:!1,url:"ajax.php",dataType:"json",data:$.param(a),beforeSend:function(){v.data({flag:!1,time:misc.timestamp()}),o.text("发送中")},success:function(a){a.error?(showDialog("text","发送失败",misc.urldecode(a.msg)),closeDialog("letters_send_"+g)):a.pmid>=0?(m.append('<div id="pmid_'+a.pmid+'" class="msgbox pull-right'+' cl">                                                              <div class="timebar text-right font12">'+a.dateline+'</div>                                                             <div class="bubbles bg_my pull-right"><i class="arrow"></i>'+misc.urldecode(a.message)+"</div>                                                          </div>"),v.val(""),setTimeout(function(){m.scrollTop(m[0].scrollHeight)},20)):(showDialog("info","","消息正在发送中，请稍后",{closetime:1500}),t(!0))},complete:function(){o.text(o.data("text")),v.data("flag",!0),t(!0)}})):(showDialog("info","","消息正在发送中，请稍后",{closetime:1500}),t(!0)):(showDialog("info","","消息发的太快了，稍等片刻",{closetime:1500}),t(!0)):(showDialog("danger","","请先同意私信发布条例",{closetime:1500}),t())},o.click(w),v.keydown(function(a){return a.ctrlKey&&13==a.which?(w(),!1):void 0}),void 0)},complete:function(){closeDialog("letters_send_loading")}}),void 0)})},emoticon_box=function(a){var b,c,d,e,f,g,h,i,j,k,l;for($("html").data("init")(),b=$(this),c=[0,140,[59,61,62,94,14,19,27,12,29,69,26,66,67,35,3,5,9,81,10,17,33,31,11]],d=[],e=0,f=c[2].length;f>e;e++)d.push([c[2][e],RESPATH+"images/emoticon/qq/"+c[2][e]+(ISRtina?"@2x":"")+".png"]);for(e=0;e<=c[1];e++)!arr.in_array(e,c[2])&&d.push([e,RESPATH+"images/emoticon/qq/"+e+(ISRtina?"@2x":"")+".png"]);for(g=new StringBuffer,h=Math.ceil(c[1]/50),g.append('<ul class="emoticon_box cl" style="width:'+(300*h+10)+'px;"><li>'),e=0,i=!0;e<=c[1];e++)i=!(e%50),i&&e>0&&e<c[1]&&g.append("</li><li>"),g.append("<span data-index="+d[e][0]+'><img alt="" src="'+d[e][1]+'"/></span>');for(g.append("</li></ul>"),j=$(g.toString()),j.find("span").click(function(){b=$(this),!!a&&a("qq",b.data("index"))}),g.clear(),k=$('<div class="emoticon_bar"></div>'),e=0;h>e;e++)g.append('<i data-index="'+e+'"'+(0>=e?' class="active"':"")+"><s></s></i>");return k.append(g.toString()),g.clear(),l=k.find("i"),l.click(function(){b=$(this),l.removeClass("active"),b.addClass("active"),j.stop(!0,!0).animate({"margin-left":0-300*parseInt(b.data("index"))},{easing:"easeOutCubic",duration:150})}),$('<div class="emoticon_area"></div>').append(j).append(k)},comment_codebox_event=function(a){a=a?a:$("#comment-list kbd"),a.each(function(a,b){var d,e,c=$(b);c.data("event")||(d=c.find(".codetip"),e=c.next(".cm_codeblock:first"),c.after('<div class="codemask dh300 hide"></div>'),e.addClass("dh300"),c.data({event:!0,open:!1,clickflag:!0}).click(function(){var a=c.next(".codemask");c.data("clickflag")&&(c.data("clickflag",!1),c.data("open")?(e.css("opacity",0),setTimeout(function(){a.removeClass("hide").css({left:c.position().left+5,width:c.outerWidth(),height:c.outerHeight()})},300),setTimeout(function(){a.css({top:c.position().top,opacity:0})},600),setTimeout(function(){a.addClass("hide"),e.removeAttr("style"),e.removeClass("open"),c.data("clickflag",!0)},700)):(e.show(),a.css("opacity",1).css({top:c.position().top,left:c.position().left+5,width:c.outerWidth(),height:c.outerHeight()}).removeClass("hide").css("top",e.position().top),setTimeout(function(){a.css({top:e.position().top+10,left:e.position().left,width:e.outerWidth(),height:85})},300),setTimeout(function(){a.css({height:e.outerHeight(),opacity:0}),e.addClass("open")},600),setTimeout(function(){a.addClass("hide").css("opacity",1),c.data("clickflag",!0)},700)),d.text((c.data("open")?"展开":"收起")+"代码"),c.data("open",!c.data("open")))}))})},codebox_event=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E;return!a||a.data("event")?!1:(a.data("event",!0),d=$("body,html"),e=$("body"),b=null===b?parseInt(e.data("comment_codebox_index"))+1:b,e.data("comment_codebox_index",b),c=c?c:$("#jsconsole #js_contents"),f=$("#navbar"),g=30,h=9999999,i=a.find("dt:first"),j=i.find(".cm_codetab:first button"),k=a.find("dd"),l=a.find("dd.cm_codes:first"),m=a.find("dd.cm_preview:first"),n=m.find("iframe:first"),o=n[0],p=null,!!o&&(p=o.contentDocument||o.contentWindow.document),q=a.find("dd.cm_console:first"),r=a.find("pre:first"),s=i.data("codetype"),r.attr("id","textcode_"+b),t=ace.edit("textcode_"+b),s=arr.in_array(s,["html","xml","css","json","javascript"])?s:"html",t.session.setMode("ace/mode/"+s),t.setOption("enableEmmet","html"==s),t.renderer.setScrollMargin(10,10),t.setShowPrintMargin(!1),t.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:1,maxLines:g}),t.resize(),u=0,v=0,setTimeout(function(){u=r.height(),l.height(u),t.setOption("maxLines",h),t.resize(),setTimeout(function(){v=r.height(),l.removeAttr("style"),t.setOption("maxLines",g),t.resize(),misc.support_css3("transition")&&l.addClass("dh300"),setTimeout(function(){a.addClass("def")},10)},10)},10),w=t.session.getLength(),x=$('<dd class="foldbar up"><i class="upicon icon-awesome-angle-up"></i><i class="downicon icon-awesome-angle-down"></i></dd>'),x.tooltip({animation:!0,html:!0,container:"body",placement:"top",title:function(){return x.hasClass("up")?"展开全部代码":"收缩"},trigger:"hover"}),w>=g&&(a.append(x),x.click(function(){var a=0;x.hasClass("up")?(x.removeClass("up").addClass("down"),l.height(u),x.data({scrollTop:$(document).scrollTop(),inserScrollTop:t.renderer.scrollTop}),t.setOption("maxLines",h),t.resize(),a=u+f.offset().top+misc.maxViewHeight()-x.offset().top,a=u+a<=v-t.renderer.scrollTop?a:v,l.height(a),setTimeout(function(){l.height(v)},300),t.renderer.scrollTop>0&&(t.renderer.scrollTop=x.data("inserScrollTop"))):(x.removeClass("down").addClass("up"),l.height(u),setTimeout(function(){t.setOption("maxLines",g),t.renderer.scrollTop=x.data("inserScrollTop"),t.resize()},300),d.stop(!0,!0).animate({scrollTop:x.data("scrollTop")},250))})),z="",A=function(){var h,i,j,a=t.getValue(),b="",d=null,e=null,f=null,g=function(){p.body.scrollHeight>=600&&m.height(p.body.scrollHeight)};if("javascript"==s)z!=a&&(c.html(""),runjs(a),b=c.html(),b=$('<div class="console_area">'+b+"<div>"),!b.find("div:first").text()&&b.find("div:first").css("color","#999").text("此代码无任何效果、输出或存在错误。"),q.append(b)),z=a;else if("json"==s){for(d=q.find(".jsonview"),d.html(""),d.jsonbrowser(a),d.find(".collapsible > .key").addClass("pkey").append('<i class="jsoncode_icon">[-]</i>'),e=$('<div class="linenumbar"></div>'),d.prepend(e),f=d.find("[data-linenum]"),h=1,i=f.length;i>=h;h++)f.eq(h-1).data("linenum",h-1),i>h&&e.append('<div class="linenums"><span>'+h+"</span></div>");d.css("padding-left",e.outerWidth()+7),j=d.find(".collapsible"),d.find(".jsoncode_caret").click(function(a){a.isDefaultPrevented(),a.stopPropagation()}),j.click(function(a){var b,c,d,f;a.isDefaultPrevented(),a.stopPropagation(),b=$(this),c=parseInt($(this).find("[data-linenum]:first").data("linenum")),d=parseInt($(this).find("[data-linenum]:last").data("linenum")),f=e.find(".linenums").slice(c-(2==c?1:2),d-(2==c?0:1)),b.data("isclose")?(b.find(".pkey:first .jsoncode_icon:first").text("[-]"),f.show(),b.data("isclose",!1)):b.find(".collapsed").length>0&&(b.find(".pkey:first .jsoncode_icon:first").text("[+]"),f.hide(),b.data("isclose",!0))})}else p.open(),p.write(a),p.close(),n.on("load",function(){g(),setTimeout(function(){g()},600),setTimeout(function(){g()},1e3)}),setTimeout(function(){g()},600),setTimeout(function(){g()},1e3)},j.click(function(){var a=$(this);switch(j.removeClass("active"),a.addClass("active"),k.removeClass("active").eq(j.index(a)).addClass("active"),x.hide(),a.data("type")){case"code":!function(){p&&(p.open(),p.write(""),p.close()),x.show()}();break;case"preview":A()}}),B=a.find(".btn_codeblock_save:first"),C=a.find(".btn_codeblock_copy:first"),D=a.find(".btn_codeblock_fullview:first"),E=D.find("i:first"),B.tooltip({animation:!0,html:!0,container:"body",placement:function(){return e.hasClass("aceeditor_bodyfullScreen")?"bottom":"top"},title:B.attr("title"),trigger:"hover"}),C.tooltip({animation:!0,html:!0,container:"body",placement:function(){return e.hasClass("aceeditor_bodyfullScreen")?"bottom":"top"},title:C.attr("title"),trigger:"manual"}),D.tooltip({animation:!0,html:!0,container:"body",placement:function(){return e.hasClass("aceeditor_bodyfullScreen")?"bottom":"top"},title:function(){return e.hasClass("aceeditor_bodyfullScreen")?"还原":"全屏浏览"},trigger:"hover"}),ISMOBILE?(C.remove(),B.remove()):(misc.setCopy(C,t.getValue(),"代码已成功复制",function(a){C.tooltip("over"==a?"show":"hide")}),B.click(function(){var a=document.createElement("a"),b=/<meta.*?charset\=.*\>/i,c=/<meta.*?charset\=.*\> /i,d=/<meta.*?charset\=.*\></i,e=t.getValue();b.test(e)?e=e.replace(b,""):c.test(e)?e=e.replace(c,""):d.test(e)&&(e=e.replace(d,"<")),a.href="data:text/html;charset=utf8,"+e,a.download="w3cfuns_code."+("javascript"==s?"js":s),a.click()}),D.click(function(){var b=misc.maxViewHeight()-45;E.attr("class",e.hasClass("aceeditor_bodyfullScreen")?"icon-awesome-expand":"icon-awesome-compress"),e.toggleClass("aceeditor_bodyfullScreen"),a.toggleClass("aceeditor_fullScreen"),t.setAutoScrollEditorIntoView(!e.hasClass("aceeditor_bodyfullScreen")),t.setOption("maxLines",e.hasClass("aceeditor_bodyfullScreen")?Math.ceil(b/18)-1:g),k.removeAttr("style"),x.removeClass("up down").addClass("up"),t.resize()}),$(window).resize(function(){var a=misc.maxViewHeight()-45;e.hasClass("aceeditor_bodyfullScreen")&&(t.setAutoScrollEditorIntoView(!e.hasClass("aceeditor_bodyfullScreen")),t.setOption("maxLines",Math.ceil(a/18)-1),k.removeAttr("style"),l.height(a),t.resize())})),void 0)},codeicon_box=function(a,b,c,d){var f,e=d?d:$("body");c=c?c:!1,f="insertcode_"+Date.now(),a.click(function(){var i,j,k,l,m,a="<div class='lh18'><p>1）代码框处于激活状态，按 <kbd>F11</kbd> 键（MAC用户请使用 <kbd>⌘</kbd> + <kbd>F11</kbd>）即可全屏化编辑，再次按 <kbd>F11</kbd> 键恢复。</p><p>2）可利用智能提示来提高编码效率。</p><p>3）可使用Emmet（Zen Coding）更有效率的编写代码，<a href='http://baike.baidu.com/link?url=6N_eGmETcCgR_M-azIjT_2ZcEoMiLL042Qj4LL9H2qXd7Kveg_T6IHKsar7C4i9CBuEIQpmJU6ktYoY7LgfZda' target='_blank' class='link'>了解更多</a>。</p></div>",d=$('<div class="downlist">               <form class="form row">                 <div class="col-md-6 form-group">                       <label for="codetype">代码类型</label>                      <select id="codetype" class="form-control">                         <option value="html" selected>HTML</option>                         <option value="xml">XML</option>                            <option value="css">CSS</option>                            <option value="json">JSON</option>                          <option value="javascript">JavaScript</option>                      </select>                   </div>                  <div class="col-md-6 form-group">                       <label for="codename">代码名称</label>                      <input id="codename" class="form-control" value="HTML代码"></input>                   </div>              </form>             <form class="form">                 <div class="form-group">                        <label for="textcode">代码内容<i class="helpicon glyphicon glyphicon-question-sign" data-toggle="popover" data-html="true" title="帮助&提示" data-content="'+a+'"></i></label>                      <pre id="textcode" class="form-control"></pre>                  </div>                  <div class="checkbox">                      <label><input id="runcode" type="checkbox" checked="checked">可运行代码</label>                  </div>              </form>         </div>'),g=d.find(".helpicon"),h=null;g.hover(function(){clearTimeout(h),g.popover("show")},function(){h=setTimeout(function(){g.popover("hide")},600),g.next(".popover:first").hover(function(){clearTimeout(h)},function(){clearTimeout(h),h=setTimeout(function(){g.popover("hide")},600)})}),i=null,j=null,k=null,l=null,m=null,showDialogPanel(f,"插入代码",d,650,450,!1,"插入",function(){b(j.val(),i.val(),l.prop("checked"),m.getValue()),closeDialog(f)},c,"取消",function(){closeDialog(f,!1)},!1,function(){var b,c,g,h,n;i=d.find("#codetype:first"),j=d.find("#codename:first"),k=d.find("#textcode:first"),l=d.find("#runcode:first"),m=null,k.height(185),j.val(i.val()+" 代码"),i.change(function(){m.session.setMode("ace/mode/"+i.val()),m.setOption("enableEmmet","html"==i.val()),(/^(html|xml|css|json|javascript)\s代码$/.test(j.val())||misc.empty(j))&&j.val(i.val()+" 代码")}),m=ace.edit("textcode"),m.session.setMode("ace/mode/"+i.val()),m.setOption("enableEmmet","html"==i.val()),m.renderer.setScrollMargin(10,10),m.setShowPrintMargin(!1),m.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,autoScrollEditorIntoView:!0}),require("ace/ext/themelist").themes.map(function(a){return a.theme}),b=!0,c=$(".dialog_"+f).parents(".w3cfunsui-dialog:first"),g=null,h=null,n=null,$(document).keydown(function(a){122==a.which&&c.length&&(a.preventDefault(),a.stopPropagation(),b&&(b=!1,e.toggleClass("aceeditor_bodyfullScreen"),k.toggleClass("aceeditor_fullScreen"),e.hasClass("aceeditor_bodyfullScreen")?(g=c.attr("class"),h=c.find(".box-3d:first"),n=h.attr("class"),c.removeAttr("class"),h.removeAttr("class"),m.setAutoScrollEditorIntoView(!1)):(c.addClass(g),h.addClass(n),m.setAutoScrollEditorIntoView(!0)),m.resize(),setTimeout(function(){b=!0},100)))})})})},function(a){a(global_init)}(jQuery),dialogShake=function(a){var b=a,c="block"==a.parents(".w3cfunsui-dialog:first").css("display");return b.dialog("open"),c&&(a=a.parents(".w3cfunsui-dialog:first"),a.hasClass("shake")||(a.addClass("shake"),setTimeout(function(){a.removeClass("shake")},200))),b},showDialog=function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t;if(d||(d={}),$(".w3cfunsui-dialog .dialog_"+d["key"]).length)return dialogShake($(".dialog_"+d["key"]+":first")),!1;if(b||(b=""),j="",k=$('<div title="'+b+'"></div>'),l=null,d["closetime"]||(d["closetime"]=0),d["key"]||d["closetime"]&&(d["key"]="time_"+Date.now(),d["resizable"]=!1),d["key"]||(d["key"]="default_"+Date.now()),k.data("key",d["key"]),k.addClass("dialog_"+d["key"]),d["button1style"]||(d["button1style"]="btn-primary"),d["button2style"]||(d["button2style"]="btn-default"),m=function(){var b=$('<div class="prompt_box" style="bottom:48px;"></div>'),e=$('<div class="plate-text plate-icon"><i class="text-'+a+" icon-prompt-"+a+'"></i><div class="msg">'+c+"</div>");return d["texticonattr"]&&e.find("i:first").attr(d["texticonattr"]),d["textattr"]&&e.find("div.msg:first").attr(d["textattr"]).addClass("msg"),b.append(e),b},"loading"==a||"ajax"==a)j=b,k.attr("title","ajax"!=a?b:"加载中，请稍候"),k.append('<div class="progress progress-striped active"><div class="progress-bar'+(d["loadingstyle"]?" progress-bar-"+d["loadingstyle"]:"")+'" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width:100%;"><span>'+("ajax"!=a?c:"loading...")+"</span></div></div>"),k.css({"padding-top":25,overflow:"hidden"}),b&&(d["height"]=90),d["minWidth"]||(d["minWidth"]=420),d["width"]||(d["width"]=420),d["height"]||(d["height"]="auto"),d["resizable"]=!1;else if(f||(f=function(){k.dialog("close")}),e||(e="确定"),a||(a="text"),d["minWidth"]||(d["minWidth"]=420),d["minHeight"]||(d["minHeight"]=220),d["width"]||(d["width"]=420),d["height"]||(d["height"]="auto"),"success"==a?d["icontip"]?k.append(m()).addClass("bd-"+a):k.append('<p class="text-success'+(d["textclass"]?" "+d["textclass"]:"")+'"'+(d["textstyle"]?' style="'+d["textstyle"]+'"':"")+">"+c+"</p>"):"info"==a?d["icontip"]?k.append(m()).addClass("bd-"+a):k.append('<p class="text-info'+(d["textclass"]?" "+d["textclass"]:"")+'"'+(d["textstyle"]?' style="'+d["textstyle"]+'"':"")+">"+c+"</p>"):"warning"==a?d["icontip"]?k.append(m()).addClass("bd-"+a):k.append('<p class="text-warning'+(d["textclass"]?" "+d["textclass"]:"")+'"'+(d["textstyle"]?' style="'+d["textstyle"]+'"':"")+">"+c+"</p>"):"danger"==a?d["icontip"]?k.append(m()).addClass("bd-"+a):k.append('<p class="text-danger'+(d["textclass"]?" "+d["textclass"]:"")+'"'+(d["textstyle"]?' style="'+d["textstyle"]+'"':"")+">"+c+"</p>"):"text"==a?k.append("<p"+(d["textclass"]?' class="'+d["textclass"]:"")+'"'+(d["textstyle"]?' style="'+d["textstyle"]+'"':"")+">"+c+"</p>"):"custom"==a&&k.css({"min-height":0}).append(c),("success"==a||"info"==a||"warning"==a||"danger"==a||"text"==a||"custom_btns"==a)&&0==d["closetime"]&&(d["resizable"]=!1,d["buttons"]=[],d["buttons"].push({text:e,style:d["button1style"],click:function(){f&&f(),closeDialog(d["key"],d["closeToHide"])}}),g&&d["buttons"].push({text:g,style:d["button2style"],click:function(){h&&h(),closeDialog(d["key"],d["closeToHide"])}}),i))for(n=0,o=i.length;o>n;n++)d["buttons"].push({text:i[n].text,style:i[n].style,click:i[n].fn});if("ajax"==a){closeDialog(d["key"],d["closeToHide"]),$("html").data("init")(),p={inajax:1,randoms:Math.random()};for(q in d.ajaxParams)p[q]=d.ajaxParams[q];$.ajax({type:"POST",url:c,dataType:d["datatype"]?d["datatype"]:"html",data:$.param(d.ajaxParams),success:function(a){d["resizable"]=!0,k.parents(".w3cfunsui-dialog").find("span.w3cfunsui-dialog-title").html(j),k.dialog("option","width",d["ajaxWidth"]),k.dialog("option","height",d["ajaxHeight"]),k.css({"padding-bottom":"15px",overflow:"auto"}),k.html("").append("xml"==d["datatype"]?$(a).find("root").text():a),d.fn&&d.fn(k);var b={};b.left=(misc.maxViewWidth()-l.outerWidth())/2,b.top="auto"==d["top"]?(misc.maxViewHeight()-l.outerHeight())/2:d["top"],l.css(b)},error:function(){k.parents(".w3cfunsui-dialog:first").remove(),showDialog("warning","Error","请求失败，您可尝试重新进行操作 ^_^",{buttons:[{text:"确定",click:function(){$(this).dialog("close")}}],modal:!0})}})}return k.dialog({resize:function(){k.removeAttr("style")},resizeStart:function(){k.removeAttr("style")},resizeStop:function(){k.removeAttr("style")},close:function(a,b){h&&h(a,b),d["closeToHide"]||k.parents(".w3cfunsui-dialog:first").remove()},autoOpen:!1}),l=k.parents(".w3cfunsui-dialog:first"),d["complete"]&&l.data("completefn",d["complete"]),k.dialog(d),k.dialog("close"),r=$(".w3cfunsui-dialog"),s=r.length,s>1&&r.each(function(a,b){b=$(b);var c=b.position();c.top=c.top<=0?0:c.top,c.left=c.left<=0?0:c.left,b.css(c)}),t=function(){var c,e;d["modal"]&&d["key"]&&l.prev(".mask-overlay").addClass("overlay_"+d["key"]),d["key"]&&l.prev(".mask-overlay").height(misc.maxHeight()),d["coverbg"]&&l.prev(".mask-overlay").css("background",d["coverbg"]),d["closetime"]&&(setTimeout(function(){k.css({"padding-bottom":0,"min-height":85}),k.parents(".box-3d:first").css("border","0 none")},30),k.prev("div.w3cfunsui-dialog-titlebar").remove(),k.next(".w3cfunsui-dialog-buttonpane").remove(),function(){var g,h,i,j,l,b=k.find("p"),c=b.html(),e=$('<div class="prompt_box bd-'+a+'"></div>'),f=$('<div class="icons bg-'+a+'"><i class="icon-prompt-'+a+'"></i></div>');e.append(f),g=c.replace(/[\u4e00-\u9fa5]/g,"**").length,h="",h=22>=g?"font26":"font18",!!d["fsize"]&&(h=d["fsize"]),i=$('<div class="plate-text text-center"><p class="tip '+h+'">'+c+"</p></div>"),j=i.find("p:first"),e.append(i),b.replaceWith(e),l=j.height()<=35,j.css("top",l?25:13),!l&&j.addClass("text-left")}(),closeDialog(d["key"],null,d["closetime"],600)),b||k.css({"padding-bottom":0,"min-height":0}).prev("div.w3cfunsui-dialog-titlebar").remove(),c={},e=function(){var a=0,b=$(HTMLNODE).attr("id");a="s_manage"===b?misc.maxViewWidth()+$("#sidebar").outerWidth():misc.maxViewWidth(),c.left=(a-l.outerWidth())/2,c.top=(misc.maxViewHeight()-l.outerHeight())/3,l.css(c),d["key"]&&l.prev(".mask-overlay").height(misc.maxHeight())},e(),$(window).resize(e),l.data("key",d["key"]),l.find(".w3cfunsui-dialog-titlebar,.w3cfunsui-dialog-content,.w3cfunsui-dialog-buttonpane,.buttonBar").wrapAll('<div class="box-3d animation_show"></div>'),!d["closetime"]&&d["icontip"]&&k.css("min-height",150).parents(".box-3d:first").addClass("bd-"+a)},setTimeout(function(){k.dialog("open"),t()},16),k},showDialogPanel=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p,q,r,s,t,u,v;if(g||(g="确定"),j||(j="取消"),i||(i=!1),l||(l=!1),o=null,p=$(".dialog_"+a+":first"),p.length)o=dialogShake(p),o=o.parents(".w3cfunsui-dialog:first"),o.find(".w3cfunsui-dialog-title").text(b),o.prev(".mask-overlay").addClass("overlay_"+a).height(misc.maxHeight());else{if(q={width:d?d:650,height:e?e:445,modal:i,key:a,minHeight:"auto",closeToHide:f,resizable:l},n)for(r in n)q[r]=n[r];q["button1style"]||(q["button1style"]="btn-primary"),q["button2style"]||(q["button2style"]="btn-default"),o=showDialog("custom",b,c,q).css({"margin-bottom":48,"padding-bottom":0}),m&&m(o),s=o.parents(".w3cfunsui-dialog:first"),t=$('<div class="buttonBar"></div>'),u=$('<button type="button" class="btn '+q["button1style"]+'">'+g+"</button>"),v=$('<button type="button" class="btn '+q["button2style"]+'">'+j+"</button>"),u.click(function(){return h(o)}),t.append(u),s.append(t),j&&k&&(v.click(function(){return k(o)}),t.append(v))}return o},showDialogNoButtonPanel=function(a,b,c,d,e,f,g,h,i){var j,k,l,m;if(f||(f=!1),j=null,k=$(".dialog_"+a+":first"),k.length)j=dialogShake(k),j=j.parents(".w3cfunsui-dialog:first"),j.find(".w3cfunsui-dialog-title").text(b),j.prev(".mask-overlay").addClass("overlay_"+a).height(misc.maxHeight());else{if(l={width:d?d:650,height:e?e:445,modal:f,key:a,minHeight:"auto",closeToHide:g},"function"==typeof h&&(l["close"]=h),i)for(m in i)l[m]=i[m];j=showDialog("custom",b,c,l).css("padding",0),j.parents(".w3cfunsui-dialog:first").find(".w3cfunsui-dialog-buttonpane").hide()}return j},showDialogTabs=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(f||(f=!1),g=null,h=$(".dialog_"+a+":first"),h.length)g=dialogShake(h),g=g.parents(".w3cfunsui-dialog:first"),g.prev(".mask-overlay").addClass("overlay_"+a).height(misc.maxHeight());
else if(g=showDialog("custom",b[0][0].tabname,"",{width:c?c:650,height:d?d:445,modal:f,key:a,minHeight:"auto",closeToHide:e,resizable:!1}).css("padding",0),g.parents(".w3cfunsui-dialog:first").find(".w3cfunsui-dialog-buttonpane").hide(),b[0].length>1){for(i=$(document.createElement("ul")),i.css({top:"16px",position:"absolute"}).attr({"class":"nav nav-tabs",role:"tablist"}),j=0,k=b[0].length;k>j;j++){if(l=document.createElement("li"),0==j&&(l.className="active"),m=document.createElement("a"),m.href="javascript:;",m.innerHTML=b[0][j].tabname,l.appendChild(m),i.append(l),n=$(document.createElement("div")),n.addClass("tabs-cont"),b[1][j].isbtn?n.css("padding","10px 10px 60px"):n.css("padding","10px 10px 0"),0==j&&n.addClass("active"),!misc.isUndefined(b[1][j].css)&&n.css(b[1][j].css),!misc.isUndefined(b[1][j].extend)&&n.attr(b[1][j].extend),!misc.isUndefined(b[1][j].cls)&&n.addClass(b[1][j].cls),n.html(b[1][j].tabcont),b[2]&&b[2][j].length){for(o=$('<div class="btBar"></div>'),p=0,q=b[2][j].length;q>p;p++)o.append(b[2][j][p]);n.append(o)}g.append(n)}r=i.find("li"),n=g.find(".tabs-cont"),o=g.find(".btBar").removeClass("btBar"),setTimeout(function(){o.addClass("buttonBar")},100),r.click(function(){var a=$(this),b=r.index(this);r.removeClass("active"),a.addClass("active"),n.removeClass("active").eq(b).addClass("active")}),s=g.parents(".w3cfunsui-dialog:first").css("padding",0),s.find(".w3cfunsui-dialog-titlebar:first").css({height:"60px",position:"relative"}).find("span:first").replaceWith(i)}else if(s=g.parents(".w3cfunsui-dialog:first"),!misc.isUndefined(b[1][0].extend)&&g.attr(b[1][0].extend),!misc.isUndefined(b[1][0].cls)&&g.addClass(b[1][0].cls),g.css("padding","0 10px").html(b[1][0].tabcont),b[2]){for(o=$('<div class="buttonBar"></div>'),p=0,q=b[2][0].length;q>p;p++)o.append(b[2][0][p]);s.append(o)}return g},closeDialog=function(a,b,c,d){var e=$(".mask-overlay.overlay_"+a),f=$(".dialog_"+a).parents(".w3cfunsui-dialog:first"),g=f.find(".box-3d:first");animation_time=0,misc.support_css3("animation")&&(animation_time=305,g.removeClass("animation_show").addClass("dh300"),setTimeout(function(){g.addClass("animation_hide")},5)),setTimeout(function(){b=b?b:!1,d||(d=0),c||(c=0),e.delay(c).fadeOut(d,function(){e.remove()}),f.delay(c).fadeOut(d,function(){f.data("completefn")&&f.data("completefn")(),b?f.hide():f.remove();try{f.data("completefn")&&f.data("completefn")(),$(".dialog_"+a).dialog("close")}catch(c){}}),g.attr("class","box-3d animation_show")},animation_time),$("body>*:not(script,.mask-overlay,.w3cfunsui-dialog,.tooltip,.popover)").removeClass("glass")},exttype=function(a,b){var d,e,f,c=a.split(",");if(b){for(a=[],d=0,e=c.length,f=[];e>d;d++)f=c[d].split("/"),c[d]=f[2],a.push(f[0]+"/"+f[1]);a=a.join(",")}else for(a="",d=0,e=c.length,f="";e>d;d++)f=c[d].split("/"),a+="*."+f[2]+";",c[d]=f[2];return new Array(a,c,c.join(", "))},+function(a){var b=formHash,c=MEMBER_ID,d=function(a){a.uploadArea.popover("destroy").popover({toggle:"popover",html:!0,title:"上传要求",placement:"top",content:'<p class="fileTip cl"><b>还能上传：</b><span>'+a.fileTipNum+"个文件</span><b>文件尺寸：</b><span>"+(a.size<1?1024*a.size+"Kb":a.size+"Mb")+"</span><b>文件格式：</b><span>"+a.type[2]+"</span></p>"})},e=function(d,e,f){var h,i,j,k,g=new XMLHttpRequest;if(g&&g.upload){for(h=a('<i class="progress dh">'),e.append(h),i=new FormData,j=0,k=f.params.length;k>j;j++)i.append(f.params[j],f.params[++j]);i.append(f.name,d),i.append("uid",c),i.append("ajaxsub","true"),i.append("formhash",b),i.append("randoms",Math.random()),g=new XMLHttpRequest,g.open("POST",f.url,!0),g.setRequestHeader("X-Requested-With","XMLHttpRequest","Content-Type","multipart/form-data;"),g.upload.onprogress=function(a){var b=0;a.lengthComputable&&(b=Math.round(100*a.loaded/a.total),b>100?h.fadeOut(600,function(){e.removeClass("readying").addClass("uploaded"),h.remove()}):h.width(b+"%"),e.find(".file_description:first em:first").removeAttr("style").text(b+"%"))},g.send(i),e.data("xhr",g),g.onreadystatechange=function(){try{4==g.readyState&&200==g.status&&(h.fadeOut(600,function(){e.removeClass("readying").addClass("uploaded"),h.remove()}),g.responseText?f.success&&f.success(a.parseJSON(g.responseText),e):f.success&&f.success("",e))}catch(b){}}}},f=function(b,c,f,g,h){var j,k,l,m,n,o,p;c.name,j=a("<li "+(c.id?'id="'+c.id+'" ':"")+'class="list-group-item cl"></li>'),j.addClass("invalid"),k=a('<span class="file_name file_icon"></span>'),l=c.name.match(/\w*$/)[0],m=a('<i class="icon_'+l+'"></i>'),k.append(m),k.append("<em>"+c.name+"</em>"),n=a('<span class="file_description"><input class="file_desc form-control input-sm" type="text" placeholder="文件描述"/></span>'),n.append("<em>0%</em>"),f.fileTipNum?c.size&&arr.in_array(l,f.type[1])?c.size>(f.size<1?1024*f.size:1048576*f.size)?(h&&h.cancelUpload(c.id),j.append('<p style="color:#f00;">'+("大小超限制("+(f.size<1?1024*f.size+"Kb":f.size+"Mb")+")")+"</p>")):(f.fileTipNum--,d(f),j.removeClass("invalid").addClass("readying"),g&&e(c,j,f)):(h&&h.cancelUpload(c.id),j.append('<p style="color:#f00;">不允许上传此类型文件</p>')):(h&&h.cancelUpload(c.id),j.append('<p style="color:#f00;">上传数量超出限制</p>')),o=a('<span class="file_operate"></span>'),p=a('<button type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'),p.click(function(){try{j.slideUp(200,function(){j.remove(),f.fileTipNum=f.limit-b.find("li.readying,li.uploaded").length,d(f),f.delfn&&f.delfn(j,c)}),j.data("xhr")&&j.data("xhr").abort(),h&&h.cancelUpload(c.id)}catch(a){}}),o.append(p),j.prepend(o),j.prepend(n),j.prepend(k),b.append(j),misc.placeholder(n.find("input.form-control")),b.scrollTop(b[0].scrollHeight)},g=function(a,b,c,d){for(var e=0,g=b.length;g>e;e++)f(a,b[e],c,d)};a.fn.extend({ajaxUpload:function(e){var j,k,l,m,n,o,p,h=!!(new XMLHttpRequest).upload,i={url:e["url"]?e["url"]:"/ajax.php",loadurl:e["loadurl"]?e["loadurl"]:"",name:e["name"],params:e["params"]?e["params"]:[],type:exttype(e["type"],h),type_description:e["type_description"],width:e["width"]?e["width"]:260,height:e["height"]?e["height"]:34,btwidth:e["btwidth"]?e["btwidth"]:82,size:e["size"],limit:e["limit"]?e["limit"]:1,bordercolor:e["bordercolor"]?e["bordercolor"]:"#ccc",borderhovercolor:e["borderhovercolor"]?e["borderhovercolor"]:"#d1d1d1",dragtext:e["dragtext"]?e["dragtext"]:"您可以将需要上传的文件拖拽至此",success:e["success"]?e["success"]:null,delfn:e["delfn"]?e["delfn"]:null};i.fileTipNum=i.limit,j="uploadArea_"+Date.now(),k=a('<div id="'+j+'" class="uploadArea"></div>'),k.css("border-color",i.bordercolor),this.css("border-color",i.bordercolor),k.width(i.width+i.btwidth),k=this.wrap(k),k=a("#"+j),l=a('<div class="uploadBox cl">'),k.append(l),i.uploadArea=k,this.appendTo(l),d(i),k.hover(function(){k.popover("show")},function(){k.popover("hide")}),m=a('<ul class="fileList list-group"></ul>'),k.append(m),h?(this.addClass("radius"),n=a('<div class="dragArea"></div>'),n.css({width:i.width,height:i.height,"line-height":i.height+"px","border-color":i.bordercolor}).text(i.dragtext),l.prepend(n),n.on("dragover",function(a){a.preventDefault(),a.stopPropagation(),n.addClass("dragAreaHover").css({"line-height":i.height-2+"px","border-color":i.borderhovercolor}).text("释放鼠标，立即上传")}),n.on("dragleave",function(a){a.stopPropagation(),n.removeClass("dragAreaHover").css({"line-height":i.height+"px","border-color":i.bordercolor}).text(i.dragtext)}),n[0].ondrop=function(a){a.preventDefault(),a.stopPropagation(),n.removeClass("dragAreaHover").text(i.limit<=1?i.dragtext:"您可以追加新的文件"),g(m,a.dataTransfer.files,i,h)},o=a('<input id="'+i.name+'" name="'+i.name+'" type="file" '+(i.limit>1?'multiple="true" ':"")+' style="display:block; top:-22px; right:0; width:'+i.btwidth+"px; height:"+(i.height+22)+'px; opacity:0; cursor:pointer; z-index:1; position:absolute;"/>'),l.prepend(o),o.change(function(a){g(m,a.target.files,i,h),o.val("")})):(p=a('<i id="'+i.name+'" name="'+i.name+'"></i>'),this.after(p),misc.loadjs(RESJSPATH+"plugin/swfupload/swfupload.js",function(){var e,g,d={uid:c,ajaxsub:"true",formhash:b,randoms:Math.random()};for(e=0,g=i.params.length;g>e;e++)d[i.params[e]]=i.params[++e];new SWFUpload({upload_url:i.url,post_params:d,file_post_name:i.name,file_size_limit:i.size<1?1024*i.size:1048576*i.size,file_types:i.type[0],file_types_description:i.type_description,swfupload_preload_handler:function(){this.support.loading||misc.support_flash()},swfupload_load_failed_handler:function(){},file_queued_handler:function(a){f(m,a,i,!1,this)},file_queue_error_handler:function(a){return f(m,a,i,!1,this),!1},upload_start_handler:function(b){var d,c=a("#"+b.id);return c.hasClass("invalid")?!1:(d=a('<i class="progress dh"></i>'),c.append(d),!0)},upload_progress_handler:function(b,c,d){var e=a("#"+b.id),f=Math.round(100*(c/d));e.find("i.progress:first").width(f+"%"),e.find(".file_description:first em:first").removeAttr("style").text(f+"%")},upload_success_handler:function(b,c){var d=a("#"+b.id),e=d.find("i.progress:first");e.fadeOut(600,function(){d.removeClass("readying").addClass("uploaded"),e.remove()}),c?i.success&&i.success(a.parseJSON(c),d):i.success&&i.success("",d)},upload_complete_handler:function(){try{this.getStats().files_queued>0&&this.startUpload()}catch(a){}},file_dialog_complete_handler:function(){this.startUpload()},button_placeholder_id:i.name,button_width:i.btwidth,button_height:i.height,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:"transparent",debug:!1})}))}})}(jQuery),+function(a){var b=formHash,c=MEMBER_ID,d=function(d,e,f){var h,i,j,k,g=new XMLHttpRequest;if(g&&g.upload){for(h=a('<i class="progress dh"></i>'),e.append(h),i=new FormData,j=0,k=f.params.length;k>j;j++)i.append(f.params[j],f.params[++j]);i.append(f.name,d),i.append("uid",c),i.append("ajaxsub","true"),i.append("formhash",b),i.append("randoms",Math.random()),g=new XMLHttpRequest,g.open("POST",f.url,!0),g.setRequestHeader("X-Requested-With","XMLHttpRequest","Content-Type","multipart/form-data;"),g.upload.onprogress=function(a){var b=0;a.lengthComputable&&(b=Math.round(100*a.loaded/a.total),b>100?h.fadeOut(600,function(){e.removeClass("readying").addClass("uploaded"),h.remove()}):h.width(b+"%"),e.find(".file_description:first em:first").removeAttr("style").text(b+"%"))},g.send(i),e.data("xhr",g),g.onreadystatechange=function(){try{4==g.readyState&&200==g.status&&(h.fadeOut(600,function(){e.removeClass("readying").addClass("unused uploaded"),h.remove()}),g.responseText?f.success&&f.success(a.parseJSON(g.responseText),e,f):f.success&&f.success("",e,f))}catch(b){}}}},e=function(b,c,e,f,g){var j,k,l,m,n,o,p,h=!0;c.name,j=a("<dd "+(c.id?'id="'+c.id+'" ':"")+'class="cl"></dd>'),k=a('<span class="file_name file_icon"></span>'),l=c.name.match(/\w*$/)[0],m=a('<i class="icon_'+l+'"></i>'),k.append(m),k.append("<em>"+c.name+"</em>"),n=a('<span class="file_description"></span>'),j.addClass("invalid"),0!=e.limit&&b.find("dd").length-b.find("dd.invalid").length>=e.limit?(g&&g.cancelUpload(c.id),showDialog("danger","","上传数量超出限制",{key:"upload_error",closetime:2e3}),h=!1):c.size&&arr.in_array(l,e.type[1])?c.size>(e.size<1?1024*e.size:1048576*e.size)?(g&&g.cancelUpload(c.id),showDialog("danger","","大小超限制("+(e.size<1?1024*e.size+"Kb":e.size+"Mb")+")",{key:"upload_error",closetime:2e3}),h=!1):(j.removeClass("invalid").addClass("readying"),n.append("<em>0%</em>"),f&&d(c,j,e)):(g&&g.cancelUpload(c.id),showDialog("danger","","不允许上传此类型文件",{key:"upload_error",closetime:2e3}),h=!1),o=a('<span class="file_operate"></span>'),p=a('<a class="filedel" href="javascript:;">删除</a>'),a('<a class="fileinsert" href="javascript:;">插入</a>'),h&&(p.click(function(){try{showDialog("danger","确认删除？","此张图片即将删除，是否继续？",{modal:1},"立即删除",function(){j.slideUp(200,function(){j.data("xhr")&&j.data("xhr").abort(),g&&g.cancelUpload(c.id);var a=0;e.limit>0&&(a=b.find("dd.readying,dd.uploaded").length,e.fileNum=a>0?e.limit-a:e.limit,e.fileTipNum.text(e.fileNum+"个文件")),e.delfn&&e.delfn(b,j,e),j.remove()})},"取消删除")}catch(a){}}),o.append(p),j.append(k),j.append(n),j.append(o),b.append(j),b.scrollTop(b[0].scrollHeight))},f=function(b,c){var d=b.find(".used .filedel,.unused .filedel");d.click(function(){try{var d=a(this);showDialog("danger","确认删除？","此附件即将删除，是否继续？",{modal:1},"立即删除",function(){var a=d.parents(".unused,.used");a.fadeOut(600,function(){c.delfn&&c.delfn(b,a,c),a.remove();var d=0;c.limit>0&&(d=b.find("dd.readying,dd.uploaded").length,c.fileNum=d>0?c.limit-d:c.limit,c.fileTipNum.text(c.fileNum+"个文件"))})},"取消删除")}catch(e){}})},g=function(a,b,c,d){for(var f=0,g=b.length;g>f;f++)e(a,b[f],c,d)};a.fn.extend({ajaxUploadDialog:function(d){var j,h=!!(new XMLHttpRequest).upload,i={url:d["url"]?d["url"]:"/ajax.php",id:d["id"],name:d["name"],btup_id:d["btup_id"],key:"upload_file_"+Date.now(),size:d["size"],params:d["params"]?d["params"]:[],type:exttype(d["type"],h),type_description:d["type_description"],remotepicture:d["remotepicture"]?!0:!1,limit:d["limit"]?d["limit"]:0,width:d["width"]?d["width"]:650,height:d["height"]?d["height"]:500,imgwidth:(d["imgwidth"]?d["imgwidth"]:130)+(h?0:1),imgheight:(d["imgheight"]?d["imgheight"]:40)+(h?0:2),imgpath:d["imgpath"]?d["imgpath"]:RESPATH+"/swf/swfupload/uploadbutton.png",dragtext:d["dragtext"]?d["dragtext"]:"释放鼠标，立即上传",success:d["success"]?d["success"]:null,delfn:d["delfn"]?d["delfn"]:null,openedfn:d["openedfn"]?d["openedfn"]:null};i.fileNum=i.limit,j=a("#"+i.id),j.data("key",i.key).click(function(){var k,l,m,n,o,q,r,d=a(".dialog_"+j.data("key")+":first");d.length?(d.dialog("open"),d.find(".tooltip:first").remove()):(k=a('<div class="upload_center_panel"></div>'),l=a('<div class="fileTitle"><span class="file_name">文件详情</span></div>'),m=a('<dl class="fileList cl"></dl>'),m.height(i.height-185),k.append(l),k.append(m),n=a('<p class="fileTip cl">'+(i.limit>0?"<b>还能上传：</b><span>"+i.limit+"个文件</span>":"")+(i.size>0?"<b>单个文件尺寸：</b><span>"+(i.size<1?1024*i.size+"Kb":i.size+"Mb")+"</span>":"")+"<b>文件格式：</b><span>"+i.type[2]+"</span></p>"),i.fileTipNum=n.find("span:first"),k.append(n),i.paneldata=[[{tabname:"上传文件"}],[{tabcont:k,cls:"dialog-upload-panel"}]],h?(o=a('<div class="upload_top_panel cl"></div>'),new XMLHttpRequest,q=a('<i id="'+i.btup_id+'"></i>'),q.html('<input id="'+i.name+'" type="file" multiple="true"'+' style="display:block; top:-22px; left:0; width:'+i.imgwidth+"px; height:"+(i.imgheight+22)+'px; opacity:0; cursor:pointer; z-index:1; position:absolute;"/>'),q.css({display:"inline-block",width:i.imgwidth,height:i.imgheight,background:"url("+i.imgpath+") no-repeat 0 -1px",cursor:"pointer",position:"relative"}),q.hover(function(){q.css("background-position","0 -"+(i.imgheight+3)+"px")},function(){q.css("background-position","0 -1px")}),q.mousedown(function(){q.css("background-position","0 -"+(2*i.imgheight+5)+"px")}),q.mouseup(function(){q.css("background-position","0 -"+(3*i.imgheight+7)+"px")}),q.change(function(a){g(m,a.target.files,i,h),q.val("")}),r=a('<div class="dragArea dh200">'+i.dragtext+"</div>"),h&&(k.on("dragover",function(a){a.preventDefault(),a.stopPropagation(),k.addClass("dragStyle")}),r.on("dragleave",function(a){a.preventDefault(),k.removeClass("dragStyle")})[0].ondrop=function(a){a.preventDefault(),a.stopPropagation(),k.removeClass("dragStyle"),g(m,a.dataTransfer.files,i,h)},q.tooltip({placement:"right",title:"也您可以直接把需要上传的文件，直接拖入到本窗口中"})),o.append(q),h&&k.append(r),k.prepend(o),d=showDialogTabs(i.key,i.paneldata,i.width,i.height,!0,!1),i.openedfn&&i.openedfn(i,d.find(".fileList:first"),f)):misc.loadjs(RESJSPATH+"plugin/swfupload/swfupload.js",function(){var j,l,n,g=a('<div class="upload_top_panel"></div>'),h=a('<i id="'+i.btup_id+'"></i>');for(g.append(h),k.prepend(g),d=showDialogTabs(i.key,i.paneldata,i.width,i.height,!0,!1),i.openedfn&&i.openedfn(i,d.find(".fileList:first"),f),j={uid:c,ajaxsub:"true",formhash:b,randoms:Math.random()},l=0,n=i.params.length;n>l;l++)j[i.params[l]]=i.params[++l];new SWFUpload({upload_url:i.url,post_params:j,file_post_name:i.name,file_size_limit:i.size<1?1024*i.size:1048576*i.size,file_types:i.type[0],file_types_description:i.type_description,swfupload_preload_handler:function(){this.support.loading||misc.support_flash()},swfupload_load_failed_handler:function(){},file_queued_handler:function(a){e(m,a,i,!1,this)},file_queue_error_handler:function(a){return e(m,a,i,!1,this),!1},upload_start_handler:function(b){var d,c=a("#"+b.id);return c.hasClass("invalid")?!1:(d=a('<i class="progress dh"></i>'),c.append(d),!0)},upload_progress_handler:function(b,c,d){var e=a("#"+b.id),f=Math.round(100*(c/d));e.find("i.progress:first").width(f+"%"),e.find(".file_description:first em:first").removeAttr("style").text(f+"%")},upload_success_handler:function(b,c){var d=a("#"+b.id),e=d.find("i.progress:first");e.fadeOut(600,function(){d.removeClass("readying").addClass("unused uploaded"),e.remove()}),c?i.success&&i.success(a.parseJSON(c),d,i):i.success&&i.success("",d,i)},upload_complete_handler:function(){try{this.getStats().files_queued>0&&this.startUpload()}catch(a){}},file_dialog_complete_handler:function(){this.startUpload()},button_image_url:i.imgpath,button_placeholder_id:i.btup_id,button_width:i.imgwidth,button_height:i.imgheight,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:"transparent",debug:!1})}))})}})}(jQuery),+function(a){var b=formHash,c=MEMBER_ID,d=function(d,e,f){var h,i,j,k,l,g=new XMLHttpRequest;if(g&&g.upload){for(h=e.find(".thumb .pic-box .progress"),i=h.find(".progress-bar"),j=new FormData,k=0,l=f.params.length;l>k;k++)j.append(f.params[k],f.params[++k]);j.append(f.name,d),j.append("uid",c),j.append("ajaxsub","true"),j.append("formhash",b),j.append("randoms",Math.random()),g=new XMLHttpRequest,g.open("POST",f.url,!0),g.setRequestHeader("X-Requested-With","XMLHttpRequest","Content-Type","multipart/form-data;"),g.upload.onprogress=function(a){var b=0;a.lengthComputable&&(b=Math.round(100*a.loaded/a.total),b>=100?(e.removeClass("readying").addClass("uploaded"),i.width(b+"%").text("请稍后")):i.width(b+"%").text(b+"%"))},g.send(j),e.data("xhr",g),g.onreadystatechange=function(){try{4==g.readyState&&200==g.status&&(g.responseText?f.success&&f.success(a.parseJSON(g.responseText),e,f):f.success&&f.success("",e,f))}catch(b){}}}},e=function(b,c,e,f,g){var l,n,h=!0,i=c.name,j=i.match(/\w*$/)[0],k=a("<div "+(c.id?'id="'+c.id+'" ':"")+'class="unused picplate invalid">                         <div class="thumb">                             <div class="pic-box icon-awesome-picture">                                  <div class="progress"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div></div>                              </div>                              <input name="rb_cover" class="rb_cover" type="radio"/>                          </div>                          <span>                              <input class="form-control input-sm" type="text" placeholder="图片描述">                                <a class="deletePic icon-awesome-trash-o" href="javascript:;"></a>                          </span>                     </div>');misc.placeholder(k.find("input.form-control")),l=k.find(".thumb"),l.find(".pic-box"),n=k.find(".deletePic"),0!=e.limit&&b.find(".picplate").length-b.find(".thumb.invalid").length>=e.limit?(g&&g.cancelUpload(c.id),showDialog("danger","","上传数量超出限制",{key:"upload_error",closetime:2e3}),h=!1):c.size&&arr.in_array(j,e.type[1])?0!=e.size&&c.size>1048576*e.size?(g&&g.cancelUpload(c.id),showDialog("danger","","文件大小超限制",{key:"upload_error",closetime:2e3}),h=!1):(k.removeClass("invalid").addClass("readying"),f&&d(c,k,e)):(g&&g.cancelUpload(c.id),showDialog("danger","","不允许上传此类型文件",{key:"upload_error",closetime:2e3}),h=!1),h&&(n.click(function(){try{showDialog("danger","确认删除？","此张图片即将删除，是否继续？",{modal:1},"立即删除",function(){k.fadeOut(600,function(){k.data("xhr")&&k.data("xhr").abort(),g&&g.cancelUpload(c.id);var a=0;k.remove(),e.limit>0&&(a=b.find(".picplate.readying,.picplate.uploaded").length,e.fileNum=a>0?e.limit-a:e.limit,e.limit>0&&e.fileTipNum.text(e.fileNum+"张图片")),e.delfn&&e.delfn(b,k,e)})},"取消删除")}catch(a){}}),b.append(k))},f=function(b,c){var d=b.find(".used .deletePic,.unused .deletePic");d.click(function(){try{var d=a(this);showDialog("danger","确认删除？","此张图片即将删除，是否继续？",{modal:1},"立即删除",function(){var a=d.parents(".used,.unused");a.fadeOut(600,function(){c.delfn&&c.delfn(b,a,c),a.remove();var d=0;c.limit>0&&(d=b.find(".picplate.readying,.picplate.uploaded").length,c.fileNum=d>0?c.limit-d:c.limit,c.limit>0&&c.fileTipNum.text(c.fileNum+"张图片"))})},"取消删除")}catch(e){}})},g=function(a,b,c,d){for(var f=0,g=b.length;g>f;f++)e(a,b[f],c,d)};a.fn.extend({ajaxUploadPictureDialog:function(d){var j,h=!!(new XMLHttpRequest).upload,i={url:d["url"]?d["url"]:"/ajax.php",htmldata:d["htmldata"]?d["htmldata"]:"",id:d["id"],name:d["name"],btup_id:d["btup_id"],key:d["key"]?d["key"]:"upload_picture_"+Date.now(),size:d["size"]?d["size"]:0,params:d["params"]?d["params"]:[],type:exttype(d["type"],h),type_description:d["type_description"],onlypicture:d["onlypicture"]?!0:!1,remotepicture:d["remotepicture"]?!0:!1,limit:d["limit"]?d["limit"]:0,width:d["width"]?d["width"]:700,height:d["height"]?d["height"]:490,imgwidth:(d["imgwidth"]?d["imgwidth"]:100)+(h?0:1),imgheight:(d["imgheight"]?d["imgheight"]:31)+(h?0:2),imgpath:d["imgpath"]?d["imgpath"]:RESPATH+"swf/swfupload/uploadbutton_small.png",dragtext:d["dragtext"]?d["dragtext"]:"也可将文件拖拽至此",fileTipNum:"",success:d["success"]?d["success"]:null,delfn:d["delfn"]?d["delfn"]:null,openedfn:d["openedfn"]?d["openedfn"]:null};i.fileNum=i.limit,j=a("#"+i.id),j.data("key",i.key).click(function(){var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,d=a(".dialog_"+j.data("key")+":first");if(d.length)d.dialog("open"),d.find(".tooltip:first").remove();else{for(k=null,l=a(document.createDocumentFragment()),m='<ul class="tabmenu pull-left"><li class="active">本地图片</li>',n="",o=0,p=i.htmldata[0].length;p>o;o++)m+="<li>"+i.htmldata[0][o]+"</li>",n+='<div class="tabcont"></div>';for(m+="</ul>",q=a(m),r=q.find("li"),s=a('                          <div class="tabmain pull-right" style="width:'+(i.width-102)+'px;">                             <div class="tabcont active">                                    <div class="pic_upload_toppanel"></div>                                 <div class="pic_upload_contpanel"></div>                                </div>                              '+n+'                               <div class="dragArea"></div>                            </div>'),t=s.find(".tabcont"),o=1,p=0,u=t.length;u>o;o++,p++)t.eq(o).append(i.htmldata[2][p]),i.htmldata[1][o]&&t.eq(o+1).attr(i.htmldata[1][o]);v=s.find(".pic_upload_toppanel:first"),w=s.find(".pic_upload_contpanel:first"),x=s.find(".dragArea:first"),r.click(function(){k=a(this);var b=r.index(k);r.removeClass("active").eq(b).addClass("active"),t.removeClass("active").eq(b).addClass("active")}),y=a('<i id="'+i.btup_id+'"></i>'),h&&(y.html('<input id="'+i.name+'" type="file" multiple="true" '+' style="display:block; top:-22px; left:0; width:'+i.imgwidth+"px; height:"+(i.imgheight+22)+'px; opacity:0; cursor:pointer; z-index:1; position:absolute;"/>'),y.css({display:"inline-block",width:i.imgwidth,height:i.imgheight,background:"url("+i.imgpath+") no-repeat 0 -1px",cursor:"pointer",position:"relative"}),y.hover(function(){y.css("background-position","0 -"+(i.imgheight+3)+"px")},function(){y.css("background-position","0 -1px")}),y.mousedown(function(){y.css("background-position","0 -"+(2*i.imgheight+5)+"px")}),y.mouseup(function(){y.css("background-position","0 -"+(3*i.imgheight+7)+"px")}),y.change(function(a){g(w,a.target.files,i,h),y.val("")})),z=a('<p class="uptip cl">'+(i.limit>0?"<b>还能上传：</b><span>"+i.limit+"张图片</span>":"")+(i.size>0?"<b>单个文件尺寸：</b><span>"+(i.size<1?1024*i.size+"Kb":i.size+"Mb")+"</span>":"")+"<b>文件格式：</b><span>"+i.type[2]+"</span></p>"),i.fileTipNum=z.find("span:first"),v.append(z),v.append(y),l.append(q),l.append(s),d=showDialogNoButtonPanel(i.key,"插入图片",l,i.width,i.height,!1,!0).addClass("uploadPicArea"),w=s.find(".pic_upload_contpanel:first"),i.openedfn&&i.openedfn(i,r,t,w,f),h?(d.on("dragover",function(a){a.preventDefault(),a.stopPropagation(),x.text("释放鼠标，立即上传"),s.addClass("dragStyle")}),x.on("dragleave",function(a){a.preventDefault(),x.removeClass("dragAreaHover bg-success").text(i.limit<=1?i.dragtext:"您可以追加新的文件"),s.removeClass("dragStyle")})[0].ondrop=function(a){a.preventDefault(),a.stopPropagation(),s.removeClass("dragStyle"),g(w,a.dataTransfer.files,i,h)},y.tooltip({placement:"right",title:"也您可以直接把需要上传的文件，直接拖入到本窗口中"})):misc.loadjs(RESJSPATH+"plugin/swfupload/swfupload.js",function(){var f,g,d={uid:c,ajaxsub:"true",formhash:b,randoms:Math.random()};for(f=0,g=i.params.length;g>f;f++)d[i.params[f]]=i.params[++f];new SWFUpload({upload_url:i.url,post_params:d,file_post_name:i.name,file_size_limit:i.size<1?1024*i.size:1048576*i.size,file_types:i.type[0],file_types_description:i.type_description,swfupload_preload_handler:function(){this.support.loading||misc.support_flash(1)},swfupload_load_failed_handler:function(){},file_queued_handler:function(a){e(w,a,i,!1,this)},file_queue_error_handler:function(a){return e(w,a,i,!1,this),!1},upload_start_handler:function(b){var d,c=a("#"+b.id);return c.hasClass("invalid")?!1:(d=c.find(".progress:first"),c.append(d),!0)},upload_progress_handler:function(b,c,d){var e=a("#"+b.id),f=e.find(".progress:first"),g=f.find(".progress-bar:first");percent=Math.round(100*c/d),percent>=100?(e.removeClass("readying").addClass("uploaded"),f.remove()):g.width(percent+"%").text(percent+"%")},upload_success_handler:function(b,c){var d=a("#"+b.id);c?i.success&&i.success(a.parseJSON(c),d,i):i.success&&i.success("",d,i)},upload_complete_handler:function(){try{this.getStats().files_queued>0&&this.startUpload()}catch(a){}},file_dialog_complete_handler:function(){this.startUpload()},button_image_url:i.imgpath,button_placeholder_id:i.btup_id,button_width:i.imgwidth,button_height:i.imgheight,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:"transparent",debug:!1})})}})}})}(jQuery),+function(a){a.getUrlParam=function(b,c){var g,h,d=new RegExp("(^|&)"+b+"=([^&]*)(&|$)"),e=c?c.replace(/.*?\?/g,"").match(d):window.location.search.substr(1).match(d),f="";if(e)return misc.urldecode(e[2]);if(a("html").data("init")(),f=(c?"/"+c.replace(SITEURL,""):window.location.pathname).match(/\/[\w:-]*/g),"mod"==b)f=f[1];else if("inc"==b)f=f[2];else if("do"==b)f=f[3];else for(g=0,h=f.length;h>g;g++)if(f[g]=="/"+b){f=f[g+1];break}return"string"==typeof f?f.replace(/^\//,""):!1}}(jQuery),function(a){a.ctrlZ=function(b,c){var f,g,h,d={undo:!0,redo:!0,interval:.2},e=this;e.qty=0,e.undo_buffer={},e.infos={},e.settings={},f=a(b),b=b,e.init=function(){e.settings=a.extend({},d,c),f.each(function(){e.qty++;var b=!1;(b=a(this).attr("id"))||(b="ctrlZ_"+e.qty,a(this).attr("id",b)),e.undo_buffer[b]=new Array,e.infos[b]={scan:!0,ctrl:!1,rang:0,prec:""}}).keyup(function(b){var c=a(this).attr("id"),d=g(b);17==d&&(e.infos[c].ctrl=!1)}).keydown(function(b){var c=a(this).attr("id"),d=g(b);if(17==d&&(e.infos[c].ctrl=!0),89==d&&e.infos[c].ctrl&&(b.preventDefault(),e.infos[c].rang<e.undo_buffer[c].length-1))try{e.infos[c].scan=!1,e.infos[c].rang++,e.infos[c].prec_val=e.undo_buffer[c][e.infos[c].rang],a(this).val(e.infos[c].prec_val)}catch(f){}if(90==d&&e.infos[c].ctrl&&(b.preventDefault(),e.infos[c].rang>1))try{e.infos[c].scan=!1,e.infos[c].rang--,e.infos[c].prec_val=e.undo_buffer[c][e.infos[c].rang],a(this).val(e.infos[c].prec_val)}catch(f){}}),h()},g=function(a){return a.keyCode?a.keyCode:a.charCode?a.charCode:a.which},h=function(){setInterval(function(){var b,c;for(b in e.undo_buffer)e.undo_buffer.hasOwnProperty(b)&&(c=a("#"+b).val(),e.infos[b].scan?e.infos[b].prec_val!=c&&(e.infos[b].rang++,e.undo_buffer[b][e.infos[b].rang]=c,e.infos[b].prec_val=c):e.infos[b].prec_val!=c&&(e.undo_buffer[b].splice(e.infos[b].rang+1,e.undo_buffer[b].length-e.infos[b].rang+1),e.infos[b].scan=!0))},1e3*e.settings.interval)},e.init()},a.fn.ctrlZ=function(b){return this.each(function(){if(void 0==a(this).data("ctrlZ")){var c=new a.ctrlZ(this,b);a(this).data("ctrlZ",c)}})}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function i(b){var q,r,s,c=b||window.event,g=d.call(arguments,1),i=0,l=0,m=0,n=0,o=0,p=0;return b=a.event.fix(c),b.type="mousewheel","detail"in c&&(m=-1*c.detail),"wheelDelta"in c&&(m=c.wheelDelta),"wheelDeltaY"in c&&(m=c.wheelDeltaY),"wheelDeltaX"in c&&(l=-1*c.wheelDeltaX),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(l=-1*m,m=0),i=0===m?l:m,"deltaY"in c&&(m=-1*c.deltaY,i=m),"deltaX"in c&&(l=c.deltaX,0===m&&(i=-1*l)),0!==m||0!==l?(1===c.deltaMode?(q=a.data(this,"mousewheel-line-height"),i*=q,m*=q,l*=q):2===c.deltaMode&&(r=a.data(this,"mousewheel-page-height"),i*=r,m*=r,l*=r),n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,k(c,n)&&(f/=40)),k(c,n)&&(i/=40,l/=40,m/=40),i=Math[i>=1?"floor":"ceil"](i/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),h.settings.normalizeOffset&&this.getBoundingClientRect&&(s=this.getBoundingClientRect(),o=b.clientX-s.left,p=b.clientY-s.top),b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,g.unshift(b,i,l,m),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,g)):void 0}function j(){f=null}function k(a,b){return h.settings.adjustOldDeltas&&"mousewheel"===a.type&&0===b%120}var e,f,g,h,b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice;if(a.event.fixHooks)for(g=b.length;g;)a.event.fixHooks[b[--g]]=a.event.mouseHooks;h=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],i,!1);else this.onmousewheel=i;a.data(this,"mousewheel-line-height",h.getLineHeight(this)),a.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=c.length;b;)this.removeEventListener(c[--b],i,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var c,a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var e,c=!1,d=this;return a(this).one("bsTransitionEnd",function(){c=!0}),e=function(){c||a(d).trigger(a.support.transition.end)},setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function d(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})}var e,b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.VERSION="3.3.4",c.TRANSITION_DURATION=150,c.prototype.close=function(b){function g(){f.detach().trigger("closed.bs.alert").remove()}var f,d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,"")),f=a(e),b&&b.preventDefault(),f.length||(f=d.closest(".alert")),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",g).emulateTransitionEnd(c.TRANSITION_DURATION):g())
},e=a.fn.alert,a.fn.alert=d,a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})}var d,b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.isLoading=!1};b.VERSION="3.3.4",b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},b.prototype.toggle=function(){var c,a=!0,b=this.$element.closest('[data-toggle="buttons"]');b.length?(c=this.$element.find("input"),"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")):this.$element.attr("aria-pressed",!this.$element.hasClass("active")),a&&this.$element.toggleClass("active")},d=a.fn.button,a.fn.button=c,a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(b){var d=a(b.target);d.hasClass("btn")||(d=d.closest(".btn")),c.call(d,"toggle"),b.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})}var d,e,b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};b.VERSION="3.3.4",b.TRANSITION_DURATION=600,b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},b.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},b.prototype.getItemForDirection=function(a,b){var e,f,c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;return d&&!this.options.wrap?b:(e="prev"==a?-1:1,f=(c+e)%this.$items.length,this.$items.eq(f))},b.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||0>a))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(c,d){var j,k,l,m,e=this.$element.find(".item.active"),f=d||this.getItemForDirection(c,e),g=this.interval,h="next"==c?"left":"right",i=this;return f.hasClass("active")?this.sliding=!1:(j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h}),this.$element.trigger(k),k.isDefaultPrevented()?void 0:(this.sliding=!0,g&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),l=a(this.$indicators.children()[this.getItemIndex(f)]),l&&l.addClass("active")),m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h}),a.support.transition&&this.$element.hasClass("slide")?(f.addClass(c),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([c,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(b.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this))},d=a.fn.carousel,a.fn.carousel=c,a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},e=function(b){var d,g,h,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));f.hasClass("carousel")&&(g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to"),h&&(g.interval=!1),c.call(f,g),h&&f.data("bs.carousel").to(h),b.preventDefault())},a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function c(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function d(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);!e&&f.toggle&&/show|hide/.test(c)&&(f.toggle=!1),e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})}var e,b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.$trigger=a('[data-toggle="collapse"][href="#'+c.id+'"],'+'[data-toggle="collapse"][data-target="#'+c.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};b.VERSION="3.3.4",b.TRANSITION_DURATION=350,b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){var c,e,f,g,h,i;if(!(this.transitioning||this.$element.hasClass("in")||(e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),e&&e.length&&(c=e.data("bs.collapse"),c&&c.transitioning)||(f=a.Event("show.bs.collapse"),this.$element.trigger(f),f.isDefaultPrevented())))){if(e&&e.length&&(d.call(e,"hide"),c||e.data("bs.collapse",null)),g=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")},!a.support.transition)return h.call(this);i=a.camelCase(["scroll",g].join("-")),this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(b.TRANSITION_DURATION)[g](this.$element[0][i])}},b.prototype.hide=function(){var c,d,e;if(!this.transitioning&&this.$element.hasClass("in")&&(c=a.Event("hide.bs.collapse"),this.$element.trigger(c),!c.isDefaultPrevented()))return d=this.dimension(),this.$element[d](this.$element[d]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},a.support.transition?(this.$element[d](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(b.TRANSITION_DURATION),void 0):e.call(this)},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},b.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(b,d){var e=a(d);this.addAriaAndCollapsedClass(c(e),e)},this)).end()},b.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)},e=a.fn.collapse,a.fn.collapse=d,a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(b){var f,g,h,e=a(this);e.attr("data-target")||b.preventDefault(),f=c(e),g=f.data("bs.collapse"),h=g?"toggle":e.data(),d.call(f,h)})}(jQuery),+function(a){"use strict";function e(d){d&&3===d.which||(a(b).remove(),a(c).each(function(){var b=a(this),c=f(b),e={relatedTarget:this};c.hasClass("open")&&(c.trigger(d=a.Event("hide.bs.dropdown",e)),d.isDefaultPrevented()||(b.attr("aria-expanded","false"),c.removeClass("open").trigger("hidden.bs.dropdown",e)))}))}function f(b){var d,c=b.attr("data-target");return c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")),d=c&&a(c),d&&d.length?d:b.parent()}function g(b){return this.each(function(){var c=a(this),e=c.data("bs.dropdown");e||c.data("bs.dropdown",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var h,b=".dropdown-backdrop",c='[data-toggle="dropdown"]',d=function(b){a(b).on("click.bs.dropdown",this.toggle)};d.VERSION="3.3.4",d.prototype.toggle=function(b){var d,g,h,c=a(this);if(!c.is(".disabled, :disabled")){if(d=f(c),g=d.hasClass("open"),e(),!g){if("ontouchstart"in document.documentElement&&!d.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",e),h={relatedTarget:this},d.trigger(b=a.Event("show.bs.dropdown",h)),b.isDefaultPrevented())return;c.trigger("focus").attr("aria-expanded","true"),d.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},d.prototype.keydown=function(b){var d,e,g,h,i,j;if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)&&(d=a(this),b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled"))){if(e=f(d),g=e.hasClass("open"),!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(c).trigger("focus"),d.trigger("click");h=" li:not(.disabled):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h),i.length&&(j=i.index(b.target),38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus"))}},h=a.fn.dropdown,a.fn.dropdown=g,a.fn.dropdown.Constructor=d,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",c,d.prototype.toggle).on("keydown.bs.dropdown.data-api",c,d.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',d.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',d.prototype.keydown)}(jQuery),+function(a){"use strict";function c(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})}var d,b=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};b.VERSION="3.3.4",b.TRANSITION_DURATION=300,b.BACKDROP_TRANSITION_DURATION=150,b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},b.prototype.show=function(c){var d=this,e=a.Event("show.bs.modal",{relatedTarget:c});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var f,e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus(),f=a.Event("shown.bs.modal",{relatedTarget:c}),e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(b.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},b.prototype.hide=function(c){c&&c.preventDefault(),c=a.Event("hide.bs.modal"),this.$element.trigger(c),this.isShown&&!c.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(b.TRANSITION_DURATION):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},b.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(c){var f,g,d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){if(f=a.support.transition&&e,this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?(this.ignoreBackdropClick=!1,void 0):(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()),void 0)},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!c)return;f?this.$backdrop.one("bsTransitionEnd",c).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):c()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),g=function(){d.removeBackdrop(),c&&c()},a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(b.BACKDROP_TRANSITION_DURATION):g()):c&&c()},b.prototype.handleUpdate=function(){this.adjustDialog()},b.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},b.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},b.prototype.checkScrollbar=function(){var b,a=window.innerWidth;a||(b=document.documentElement.getBoundingClientRect(),a=b.right-Math.abs(b.left)),this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},b.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},b.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},b.prototype.measureScrollbar=function(){var b,a=document.createElement("div");return a.className="modal-scrollbar-measure",this.$body.append(a),b=a.offsetWidth-a.clientWidth,this.$body[0].removeChild(a),b},d=a.fn.modal,a.fn.modal=c,a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&b.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),c.call(f,g,this)})}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||!/destroy|hide/.test(c))&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})}var d,b=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",a,b)};b.VERSION="3.3.4",b.TRANSITION_DURATION=150,b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},b.prototype.init=function(b,c,d){var e,f,g,h,i;if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(e=this.options.trigger.split(" "),f=e.length;f--;)g=e[f],"click"==g?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=g&&(h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout",this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?(c.hoverState="in",void 0):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show),void 0):c.show())},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide),void 0):c.hide()},b.prototype.show=function(){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,c=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!d)return;e=this,f=this.tip(),g=this.getUID(this.type),this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade"),h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h),j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight,j&&(n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o),h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)),q=this.getCalculatedOffset(h,k,l,m),this.applyPlacement(q,h),r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)},a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(b.TRANSITION_DURATION):r()}},b.prototype.applyPlacement=function(b,c){var i,j,k,l,m,n,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in"),i=d[0].offsetWidth,j=d[0].offsetHeight,"top"==c&&j!=f&&(b.top=b.top+f-j),k=this.getViewportAdjustedDelta(c,b,i,j),k.left?b.left+=k.left:b.top+=k.top,l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight",d.offset(b),this.replaceArrow(m,d[0][n],l)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(c){function g(){"in"!=d.hoverState&&e.detach(),d.$element.removeAttr("aria-describedby").trigger("hidden.bs."+d.type),c&&c()}var d=this,e=a(this.$tip),f=a.Event("hide.bs."+this.type);return this.$element.trigger(f),f.isDefaultPrevented()?void 0:(e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.one("bsTransitionEnd",g).emulateTransitionEnd(b.TRANSITION_DURATION):g(),this.hoverState=null,this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(b){var c,d,e,f,g,h;return b=b||this.$element,c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect(),null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top})),f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null,a.extend({},e,g,h,f)},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getViewportAdjustedDelta=function(a,b,c,d){var f,g,h,i,j,k,e={top:0,left:0};return this.$viewport?(f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport),/right|left/.test(a)?(h=b.top-f-g.scroll,i=b.top+f-g.scroll+d,h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)):(j=b.left-f,k=b.left+f+c,j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)),e):e},b.prototype.getTitle=function(){var b=this.$element,c=this.options,a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title);return a},b.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})},d=a.fn.tooltip,a.fn.tooltip=c,a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||!/destroy|hide/.test(c))&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})}var d,b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.VERSION="3.3.4",b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},d=a.fn.popover,a.fn.popover=c,a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(c).is(document.body)?a(window):a(c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.4",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.data("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var g,a=this.$scrollElement.scrollTop()+this.options.offset,b=this.getScrollHeight(),c=this.options.offset+b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget;if(this.scrollHeight!=b&&this.refresh(),a>=c)return f!=(g=e[e.length-1])&&this.activate(g);if(f&&a<d[0])return this.activeTarget=null,this.clear();for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(void 0===d[g+1]||a<d[g+1])&&this.activate(e[g])},b.prototype.activate=function(b){var c,d;this.activeTarget=b,this.clear(),c=this.selector+'[data-target="'+b+'"],'+this.selector+'[data-href="'+b+'"]',d=a(c).parents("li").addClass("active"),d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})}var d,e,b=function(b){this.element=a(b)};b.VERSION="3.3.4",b.TRANSITION_DURATION=150,b.prototype.show=function(){var e,f,g,h,b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),b.parent("li").hasClass("active")||(e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]}),e.trigger(f),b.trigger(g),g.isDefaultPrevented()||f.isDefaultPrevented()||(h=a(d),this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})))},b.prototype.activate=function(c,d,e){function h(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),c.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),g?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade"),c.parent(".dropdown-menu").length&&c.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var f=d.find("> .active"),g=e&&a.support.transition&&(f.length&&f.hasClass("fade")||!!d.find("> .fade").length);f.length&&g?f.one("bsTransitionEnd",h).emulateTransitionEnd(b.TRANSITION_DURATION):h(),f.removeClass("in")},d=a.fn.tab,a.fn.tab=c,a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},e=function(b){b.preventDefault(),c.call(a(this),"show")},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function c(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})}var d,b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()
};b.VERSION="3.3.4",b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0,target:window},b.prototype.getState=function(a,b,c,d){var h,i,j,e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();return null!=c&&"top"==this.affixed?c>e?"top":!1:"bottom"==this.affixed?null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom":(h=null==this.affixed,i=h?e:f.top,j=h?g:b,null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1)},b.prototype.getPinnedOffset=function(){var a,c;return this.pinnedOffset?this.pinnedOffset:(this.$element.removeClass(b.RESET).addClass("affix"),a=this.$target.scrollTop(),c=this.$element.offset(),this.pinnedOffset=c.top-a)},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){var c,d,e,f,g,h,i,j;if(this.$element.is(":visible")){if(c=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a(document.body).height(),"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element)),h=this.getState(g,c,e,f),this.affixed!=h){if(null!=this.unpin&&this.$element.css("top",""),i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix"),this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(b.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-c-f})}},d=a.fn.affix,a.fn.affix=c,a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),d=b.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),c.call(b,d)})})}(jQuery),misc.placeholder($("input, textarea")),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}))}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var d,c=0;null!=(d=b[c]);c++)try{a(d).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}(),void 0):(i[b]=d,void 0)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var h,i,e=d.call(arguments,1),f=0,g=e.length;g>f;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(c[h]=a.isPlainObject(i)?a.isPlainObject(c[h])?a.widget.extend({},c[h],i):a.widget.extend({},i):i);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; "+"attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var f,g,h,e=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(e={},f=c.split("."),c=f.shift(),f.length){for(g=e[c]=a.widget.extend({},this.options[c]),h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];if(c=f.pop(),d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}return this._setOptions(e),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseInt(a[0],10)*(n.test(a[0])?b/100:1),parseInt(a[1],10)*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:e?a.position.scrollbarWidth():0,height:f?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var c,d,a=(b[this]||"").split(" ");1===a.length&&(a=j.test(a[0])?a.concat(["center"]):k.test(a[0])?["center"].concat(a):["center","center"]),a[0]=j.test(a[0])?a[0]:"center",a[1]=k.test(a[1])?a[1]:"center",c=l.exec(a[0]),d=l.exec(a[1]),x[this]=[c?c[0]:0,d?d[0]:0],b[this]=[m.exec(a[0])[0],m.exec(a[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&h(c+d)<n&&(i.horizontal="center"),m>p&&h(e+f)<p&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var j,c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,e=c.width,f=a.left-b.collisionPosition.marginLeft,h=d-f,i=f+b.collisionWidth-e-d;b.collisionWidth>e?h>0&&0>=i?(j=a.left+h+b.collisionWidth-e-d,a.left+=h-j):a.left=i>0&&0>=h?d:h>i?d+e-b.collisionWidth:d:h>0?a.left+=h:i>0?a.left-=i:a.left=g(a.left-f,a.left)},top:function(a,b){var j,c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,e=b.within.height,f=a.top-b.collisionPosition.marginTop,h=d-f,i=f+b.collisionHeight-e-d;b.collisionHeight>e?h>0&&0>=i?(j=a.top+h+b.collisionHeight-e-d,a.top+=h-j):a.top=i>0&&0>=h?d:h>i?d+e-b.collisionHeight:d:h>0?a.top+=h:i>0?a.top-=i:a.top=g(a.top-f,a.top)}},flip:{left:function(a,b){var n,o,c=b.within,d=c.offset.left+c.scrollLeft,e=c.width,f=c.isWindow?c.scrollLeft:c.offset.left,g=a.left-b.collisionPosition.marginLeft,i=g-f,j=g+b.collisionWidth-e-f,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,l="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,m=-2*b.offset[0];0>i?(n=a.left+k+l+m+b.collisionWidth-e-d,(0>n||n<h(i))&&(a.left+=k+l+m)):j>0&&(o=a.left-b.collisionPosition.marginLeft+k+l+m-f,(o>0||h(o)<j)&&(a.left+=k+l+m))},top:function(a,b){var o,p,c=b.within,d=c.offset.top+c.scrollTop,e=c.height,f=c.isWindow?c.scrollTop:c.offset.top,g=a.top-b.collisionPosition.marginTop,i=g-f,j=g+b.collisionHeight-e-f,k="top"===b.my[1],l=k?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];0>i?(p=a.top+l+m+n+b.collisionHeight-e-d,a.top+l+m+n>i&&(0>p||p<h(i))&&(a.top+=l+m+n)):j>0&&(o=a.top-b.collisionPosition.marginTop+l+m+n-f,a.top+l+m+n>j&&(o>0||h(o)<j)&&(a.top+=l+m+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c,d=this,e=!1,f=!1;for(a.ui.ddmanager&&!this.options.dropBehaviour&&(f=a.ui.ddmanager.drop(this,b)),this.dropped&&(f=this.dropped,this.dropped=!1),c=this.element[0];c&&(c=c.parentNode);)c===document&&(e=!0);return e||"original"!==this.options.helper?("invalid"===this.options.revert&&!f||"valid"===this.options.revert&&f||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,f)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").addBack().each(function(){this===b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!==this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;if("parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=["document"===e.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===e.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===e.containment?0:a(window).scrollLeft())+a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===e.containment?0:a(window).scrollTop())+(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor===Array)e.containment.constructor===Array&&(this.containment=e.containment);else{if(c=a(e.containment),d=c[0],!d)return;b="hidden"!==a(d).css("overflow"),this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName),j=b.pageX,k=b.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(j=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(k=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(j=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(k=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,k=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((j-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,j=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))
})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,q>h-p&&i+p>q&&s>j-p&&k+p>s||q>h-p&&i+p>q&&t>j-p&&k+p>t||r>h-p&&i+p>r&&s>j-p&&k+p>s||r>h-p&&i+p>r&&t>j-p&&k+p>t?("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m):(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=a(this).data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(d[0].style.zIndex,10)||0,a(d).each(function(a){this.style.zIndex=b+a}),this[0].style.zIndex=b+d.length)}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){var c=0;a.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,c=!0,void 0;b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,d.preventDefault(),void 0;if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,a.preventDefault(),void 0):(this._searchTimeout(a),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(a),this._change(a),void 0)}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target!==b.element[0]&&d.target!==c&&!a.contains(c,d.target)&&b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)}),void 0;var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var a=this.options.appendTo;return a&&(a=a.jquery||a.nodeType?$(a):this.document.find(a).eq(0)),a||(a=this.element.closest(".ui-front")),a.length||(a=this.document[0].body),a},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[a](b),void 0):(this.search(null,b),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults)}})}(jQuery),function(a){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("w3cfunsui-dialog-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("w3cfunsui-dialog-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var d,e,f,c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,d=this.uiDialog.find(".box-3d:first"),e=$(".mask-overlay.overlay_"+this.uiDialog.data("key")),f=0,misc.support_css3("animation")&&(f=305,d.removeClass("animation_show").addClass("dh300"),setTimeout(function(){e&&e.removeClass("mask_show"),d.addClass("animation_close")},5)),setTimeout(function(){c._destroyOverlay(),c.opener.filter(":focusable").focus().length||a(c.document[0].activeElement).blur(),c._hide(c.uiDialog,c.options.hide,function(){c._trigger("close",b)}),d.attr("class","box-3d animation_show"),$("body>*:not(script,.mask-overlay,.w3cfunsui-dialog,.tooltip,.popover)").removeClass("glass")},f))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){var b=this;return setTimeout(function(){b.uiDialog.find(".box-3d:first").removeClass("animation_show")},300),this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._isOpen=!0,this._trigger("open"),this._trigger("focus"),void 0)},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog)},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("w3cfunsui-dialog "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),this.close(b),void 0;if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?(b.target===d[0]||b.target===this.uiDialog[0])&&b.shiftKey&&(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("w3cfunsui-dialog-titlebar cl").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".w3cfunsui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button>×</button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("w3cfunsui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("w3cfunsui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("w3cfunsui-dialog-buttonpane cl"),this.uiButtonSet=a("<div>").addClass("w3cfunsui-dialog-buttonset cl").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)?(this.uiDialog.removeClass("w3cfunsui-dialog-buttons"),void 0):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a('<button class="btn btn-sm '+d.style+'"></button>').click(d.click).html(d.text).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("w3cfunsui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".w3cfunsui-dialog-content, .w3cfunsui-dialog-titlebar-close",handle:".w3cfunsui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("w3cfunsui-dialog-dragging"),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("w3cfunsui-dialog-dragging"),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".w3cfunsui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("w3cfunsui-dialog-resizing"),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){d.height=a(this).height(),d.width=a(this).width(),a(this).removeClass("w3cfunsui-dialog-resizing"),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var e=this,f=!1,g={};a.each(b,function(a,b){e._setOption(a,b),a in c&&(f=!0),a in d&&(g[a]=b)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),!d&&b!==!1&&this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".w3cfunsui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){this.options.modal&&$(".mask-overlay:first").length<=0&&(a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(a){try{b(a.target).closest(".w3cfunsui-dialog").length||(a.preventDefault(),b(".w3cfunsui-dialog:visible:last .w3cfunsui-dialog-content").data("w3cfunsui-dialog")._focusTabbable())}catch(b){}}})}),this.overlay=a("<div>").addClass("mask-overlay dh300 mask_show").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),$("body>*:not(script,.mask-overlay,.w3cfunsui-dialog,.tooltip,.popover)").addClass("glass"),a.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay&&this.overlay.remove())}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var e,b=this.options.position,c=[],d=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c[0]+(d[0]<0?d[0]:"+"+d[0])+" "+c[1]+(d[1]<0?d[1]:"+"+d[1]),at:c.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(b),e||this.uiDialog.hide()}})}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=new RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=new RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-—–\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))
},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d-e<0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(b),void 0)},previousPage:function(b){var c,d,e;return this.active?(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(b),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery);
/* COMBO: filename = plugin/editor/ubbview.min.js, type = application/javascript, resp = 200 */
!function(a,b,c){function d(a){return b.createElement(a)}function e(a,b){a.appendChild(b)}function f(a,b,d){var e,f={};b=(b||"Boolean Number String Function Array Date RegExp Object").split(" ");for(var g=0,h=b.length;h>g;g++)f["[object "+b[g].charAt(0).toUpperCase()+b[g].substr(1)+"]"]=b[g].toLowerCase();return e=Object.prototype.toString.call(a),-[1]||(a===c?e="[object Undefined]":null===a&&(e="[object Null]")),f[e]||d||"object"}function g(a,b){var d="string";return a===c?(a="undefined",b="attribute"):null===a?(a="null",b="attribute"):""===a?b=d:b||(b=f(a),b===d&&"{}[]()".indexOf(a)>-1?b="bracket":q[b]===c&&(a=(a||"").toString(),b=d)),b===d&&(a='<pre>"'+a+'"</pre>'),q[b]?'<span style="color:'+q[b]+'">'+a+"</span>":a}function h(a,b,c){p||(i.style.display="none",k.innerHTML="",p=!0),m.innerHTML=a||"",m.style.color="#0080FF",n.innerHTML=b||"",l.style.color=c||"#666",e(k,l.cloneNode(!0)),k.scrollTop=k.scrollHeight}var i=d("div");e(b.body,i),i.id="jsconsole",i.innerHTML='<div class="title"><span>'+WEBNAME+' JavaScript Console</span><a href="javascript:;" id="js_close">&#215;</a></div><div id="js_contents"></div>';var j=b.getElementsByTagName("head")[0]||b.documentElement,k=b.getElementById("js_contents"),l=d("div"),m=d("span"),n=d("span"),p=(d("a"),!1);l.className="item",m.className="tit",n.className="msg",e(l,m),e(l,n),b.getElementById("js_close").onclick=function(){return i.style.display="none",p=!1};var q={bracket:"#881280",number:"#f00",string:"#808080",regexp:"#8000ff","boolean":"#000080",attribute:"#0070a5"},r=function(a){h("alert: ",g(a))},s=" &nbsp; &nbsp; &nbsp; ",t=function(a){return f(a,"object array arguments","nop")},u={object:function(a,b){b=b||0;var c=new Array(b+1).join(s),d=new Array(b+2).join(s),e="",f=c+(b?"":"<br>")+g("{","bracket")+"<br>";for(var h in a)e=t(a[h]),f+=d+g(h,"attribute")+": "+("object"===e?"<br>":"")+this[e](a[h],b+1)+"<br>";return f+=c+g("}","bracket")},array:function(a,b){b=b||0;var c="",d="",e=g("[","bracket");for(var f in a)c=t(a[f]),e+=isNaN(f)?d+g(f,"attribute")+": "+("object"===c?"<br>":"")+this[c](a[f],b+1):d+("object"===c?"<br>":"")+this[c](a[f],b+1),d=", ";return e+g("]","bracket")},nop:function(a){return g(a)}},v={log:function(){for(var a,b=[],c=arguments,d=0,e=c.length;e>d;d++)a=t(c[d]),("arguments"===a||"object"===a&&c[d].callee)&&(a="array"),b.push(u[a](c[d]));h("console.log: ",b.join(", "))},dir:function(a){h("console.dir: ",u[t(a)](a))},_cacheTime:{},time:function(a){this._cacheTime[a]=+new Date},timeEnd:function(a){if(!this._cacheTime[a])return void h("console.time: ","[ "+a+" ] is not find!","red");var b=+new Date;h("console.time[ "+g(a,"attribute")+" ]: ",g(b-this._cacheTime[a],"number")+"ms"),delete this._cacheTime[a]},error:function(){for(var a=[],b=arguments,c=0,d=b.length;d>c;c++)a.push(b[c]);h("",a.join(", "),"red")},clear:function(){k.innerHTML="",h("Console was cleared.")}},w=b.scripts,x=a.alert,y=a.console,z=w[w.length-1].src.indexOf("rep")>-1;z&&(a.alert=r,a.console=v,a._alert=x,a._console=y,y&&y.log("\u8bf7\u4f7f\u7528 _alert \u6216\u8005 _console \u4ee3\u66ff\u8fdb\u884c\u8c03\u8bd5\u3002")),a.runjs=function(){var c=d("script");c.type="text/javascript",c.charset=b.charset||b.characterSet||"";var f=["try{",';\n}catch(e){console.error(e.name+": "+e.message)}'];return function(b,d,g){var h=c.cloneNode();g&&(h.charset=g),z||(a.alert=r,a.console=v),h.text=d?b:f.join(b),e(j,h),j.removeChild(h),h=null,z||setTimeout(function(){a.alert=x,a.console=y},99)}}()}(window,document),$.jsonbrowser={collapsibleClass:"collapsible",collapsedClass:"collapsed",collapseAll:function(a){var b=$(a);b.find("."+this.collapsibleClass+" > ul").addClass(this.collapsedClass)},expandAll:function(a){var b=$(a);b.find("."+this.collapsibleClass+" > ul").removeClass(this.collapsedClass)},showAll:function(a){var b=$(a);b.find("li").show()},hideAll:function(a){var b=$(a);b.find("li").hide()},search:function(a,b){if($.jsonbrowser.showAll(a),"string"==typeof b&&0!=b.length){b=b.toLocaleLowerCase();var c=$(a),d=function(a,b,c){b.length!=c&&(a.find("> ul > li").each(function(){var a=b[c],e=$(this);"*"==a||e.find("> .key").text().toLocaleLowerCase().indexOf(a)>-1?d(e,b,c+1):e.hide()}),0==a.find("> ul > li:visible").length&&a.parents("li").hide())};if(0==b.indexOf(".")){var e=b.split(".").filter(function(a){return""!=a});return void d(c,e,0)}$.jsonbrowser.hideAll(a);var f=function(){return $(this).text().toLocaleLowerCase().indexOf(b)>-1};c.find(".value").filter(f).parents("li").show()}}},$.fn.jsonbrowser=function(a,b){function g(a,b){var c=$('<ul data-linenum="true"></ul>');for(var e in b){var f='<span class="key">'+e+":</span>",h=b[e],i=$('<li data-linenum="true"></li>');if("object"==typeof h)null===h?i.append(f+' <span class="value empty-value">null</span>'):$.isArray(h)&&!h.length?i.append(f+' <span class="value empty-value">[]</span>'):0==Object.keys(h).length?i.append(f+' <span class="value empty-value">{}</span>'):(i.append(f+' <span class="jsoncode_caret">'+($.isArray(h)?"[":"{")+"</span>"),g(i,h),i.append('<span class="jsoncode_caret">'+($.isArray(h)?"]":"}")+"</span>"),d.collapsible&&(i.addClass($.jsonbrowser.collapsibleClass),i.on("click","> .key",function(){$(this).parent().children("ul").toggleClass($.jsonbrowser.collapsedClass)}),d.collapsed&&i.children("ul").addClass($.jsonbrowser.collapsedClass)));else{var j=$('<span class="value"></span>');if("boolean"==typeof h)h?j.text("true"):j.addClass("empty-value").text("false");else if("number"==typeof h)0===h?j.addClass("empty-value").text("0"):j.text(h);else{var k=$("<div>").text(h).html();""===k?j.addClass("empty-value").text('""'):(d.parseURLs&&(0===k.indexOf("http://")||0===k.indexOf("https://")?k=$('<a href="'+k+'" class="link_blue" target="_blank">'+k+"</a>"):0===k.indexOf("//")&&(k=$('<a href="'+d.scheme+":"+k+'" class="link_blue" target="_blank">'+k+"</a>"))),"string"==typeof k&&(k='"'+k+'"'),j.html(k))}i.append(f+" "),i.append(j)}i.append("<span>,</span>"),c.append(i)}a.append(c)}var c={scheme:"http",parseURLs:!0,collapsible:!0,collapsed:!1},d=$.extend(c,b),e="";if("string"==typeof a)try{a=JSON.parse(a)}catch(f){e='<span class="gray_999">Failed to parse JSON: '+f+"</span>"}else"object"!=typeof a&&(e='<span class="gray_999">Expected an object or string. Got neither.</span>');return this.each(function(){var b=$(this);b.empty(),e?b.html(e):g(b,a)})},+function(a){a(function(){var e=(a("body,html"),a("body"),a(".editor_audio"));BROWSER.ie<=8&&e.length&&misc.loadjs(RESJSPATH+"plugin/audio/audio.js",function(){audiojs.events.ready(function(){audiojs.createAll()})});var f=a(".editor_flash");f.length&&f.each(function(b,c){c=a(c);var d=misc.getVideoSwf(c.data("url"),!!c.data("auto"));ISMOBILE&&d?(d=c.data("url"),d?c.html('<a class="mobile" href="'+d+'" target="_blank"><p class="font22 text-center">'+d+'</p><p class="font30 text-center">\u6b64\u89c6\u9891\u5730\u5740\u65e0\u6548\u6216\u6682\u65f6\u65e0\u6cd5\u64ad\u653e\uff0c\u53ef\u70b9\u51fb\uff0c\u65b0\u7a97\u53e3\u6253\u5f00\u64ad\u653e <i class="icon-awesome-external-link"></i></p></a>'):c.html('<div class="mobile"><p class="font30 text-center">\u6b64\u89c6\u9891\u5730\u5740\u65e0\u6548\u6216\u6682\u65f6\u65e0\u6cd5\u64ad\u653e</p></div>')):"flv"===c.data("type")?c.html(AC_FL_RunContent("width",parseInt(c.data("width")),"height",parseInt(c.data("height")),"allowNetworking","internal","allowScriptAccess","never","src",d+"image/common/flvplayer.swf","flashvars","file="+c.data("url"),"quality","high","wmode","transparent","allowfullscreen","true")):c.html(AC_FL_RunContent("width",parseInt(c.data("width")),"height",parseInt(c.data("height")),"allowNetworking","internal","allowScriptAccess","never","src",encodeURI(d),"quality","high","bgcolor","#ffffff","wmode","transparent","allowfullscreen","true"))});var g=a("#jsconsole #js_contents");a(".postview .cm_codeblock,#comment-list .cm_codeblock").each(function(b,c){codebox_event(a(c),b,g)}),comment_codebox_event();require("ace/ext/themelist").themes.map(function(a){return a.theme})})}(jQuery);
/* COMBO: filename = notes/note.min.js, type = application/javascript, resp = 200 */
+function(a){a(function(){var d=(a(window),a("body"),a("#qrcode"));d.popover({title:"",html:!0,placement:"top",content:'<img width="99" height="99" alt="\u6b64\u7b14\u8bb0\u4e8c\u7ef4\u7801" src="misc.php?mod=qrcode&inc=qrcode_url&do=url&url='+misc.urlencode(location.pathname+location.search)+'&level=L&size=3"/>',trigger:ISMOBILE?"click":"hover"});var e=a("#noteinfo #infos #copyicons"),f=e.find(".copypop:first"),g=null,h=a('<p class="mg0 font12">'+f.data("content")+"</p>");f.popover({placement:"top",html:!0,content:h}).hover(function(){clearTimeout(g),!e.find(".popover").length&&f.popover("show"),send_message(null,h),e.find(".popover").hover(function(){clearTimeout(g),!e.find(".popover").length&&f.popover("show")},function(){clearTimeout(g),g=setTimeout(function(){f.popover("hide")},500)})},function(){g=setTimeout(function(){f.popover("hide")},500)}).removeAttr("data-content");var i=a("#notecontent"),j=i.find("#share-sina-weibo"),k=i.find("#share-t-weibo"),l=i.find("#share-qq"),m=i.find("#share-qzone"),n="\u300a"+a("h1:first").text()+"\u300b \u4f5c\u8005\uff1a"+a("#author_link").text();j.click(function(){misc.share("sina_weibo",n,i.find("img"),i.text().substr(0,200),"#\u524d\u7aef\u8bb0\u5f55#")}),k.click(function(){misc.share("tencent_weibo",n,i.find("img"),i.text().substr(0,200),"#\u524d\u7aef\u8bb0\u5f55#")}),l.click(function(){misc.share("qq_firend",n,i.find("img"),i.text().substr(0,200))}),m.click(function(){misc.share("qqzone",n,i.find("img"),i.text().substr(0,200))})})}(jQuery);